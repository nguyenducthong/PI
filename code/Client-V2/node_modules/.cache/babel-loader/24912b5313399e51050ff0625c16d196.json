{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.styles = exports.MTableHeader = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _TableHead = _interopRequireDefault(require(\"@material-ui/core/TableHead\"));\n\nvar _TableRow = _interopRequireDefault(require(\"@material-ui/core/TableRow\"));\n\nvar _TableCell = _interopRequireDefault(require(\"@material-ui/core/TableCell\"));\n\nvar _TableSortLabel = _interopRequireDefault(require(\"@material-ui/core/TableSortLabel\"));\n\nvar _Checkbox = _interopRequireDefault(require(\"@material-ui/core/Checkbox\"));\n\nvar _withStyles = _interopRequireDefault(require(\"@material-ui/core/styles/withStyles\"));\n\nvar _reactBeautifulDnd = require(\"react-beautiful-dnd\");\n\nvar _core = require(\"@material-ui/core\");\n\nvar CommonValues = _interopRequireWildcard(require(\"../utils/common-values\"));\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = (0, _getPrototypeOf2[\"default\"])(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return (0, _possibleConstructorReturn2[\"default\"])(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n/* eslint-enable no-unused-vars */\n\n\nvar MTableHeader = /*#__PURE__*/function (_React$Component) {\n  (0, _inherits2[\"default\"])(MTableHeader, _React$Component);\n\n  var _super = _createSuper(MTableHeader);\n\n  function MTableHeader(props) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, MTableHeader);\n    _this = _super.call(this, props);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleMouseDown\", function (e, columnDef) {\n      _this.setState({\n        lastAdditionalWidth: columnDef.tableData.additionalWidth,\n        lastX: e.clientX,\n        resizingColumnDef: columnDef\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleMouseMove\", function (e) {\n      if (!_this.state.resizingColumnDef) {\n        return;\n      }\n\n      var additionalWidth = _this.state.lastAdditionalWidth + e.clientX - _this.state.lastX;\n      additionalWidth = Math.min(_this.state.resizingColumnDef.maxWidth || additionalWidth, additionalWidth);\n\n      if (_this.state.resizingColumnDef.tableData.additionalWidth !== additionalWidth) {\n        _this.props.onColumnResized(_this.state.resizingColumnDef.tableData.id, additionalWidth);\n      }\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleMouseUp\", function (e) {\n      _this.setState({\n        resizingColumnDef: undefined\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"getCellStyle\", function (columnDef) {\n      var width = CommonValues.reducePercentsInCalc(columnDef.tableData.width, _this.props.scrollWidth);\n      var style = (0, _objectSpread2[\"default\"])({}, _this.props.headerStyle, columnDef.headerStyle, {\n        boxSizing: \"border-box\",\n        width: width,\n        maxWidth: columnDef.maxWidth,\n        minWidth: columnDef.minWidth\n      });\n\n      if (_this.props.options.tableLayout === \"fixed\" && _this.props.options.columnResizable && columnDef.resizable !== false) {\n        style.paddingRight = 2;\n      }\n\n      return style;\n    });\n    _this.state = {\n      lastX: 0,\n      resizingColumnDef: undefined\n    };\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(MTableHeader, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      document.addEventListener(\"mousemove\", this.handleMouseMove);\n      document.addEventListener(\"mouseup\", this.handleMouseUp);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener(\"mousemove\", this.handleMouseMove);\n      document.removeEventListener(\"mouseup\", this.handleMouseUp);\n    }\n  }, {\n    key: \"renderHeader\",\n    value: function renderHeader() {\n      var _this2 = this;\n\n      var size = this.props.options.padding === \"default\" ? \"medium\" : \"small\";\n      var mapArr = this.props.columns.filter(function (columnDef) {\n        return !columnDef.hidden && !(columnDef.tableData.groupOrder > -1);\n      }).sort(function (a, b) {\n        return a.tableData.columnOrder - b.tableData.columnOrder;\n      }).map(function (columnDef, index) {\n        var content = columnDef.title;\n\n        if (_this2.props.draggable) {\n          content = /*#__PURE__*/React.createElement(_reactBeautifulDnd.Draggable, {\n            key: columnDef.tableData.id,\n            draggableId: columnDef.tableData.id.toString(),\n            index: index\n          }, function (provided, snapshot) {\n            return /*#__PURE__*/React.createElement(\"div\", (0, _extends2[\"default\"])({\n              ref: provided.innerRef\n            }, provided.draggableProps, provided.dragHandleProps), columnDef.title);\n          });\n        }\n\n        if (columnDef.sorting !== false && _this2.props.sorting) {\n          content = /*#__PURE__*/React.createElement(_TableSortLabel[\"default\"], {\n            IconComponent: _this2.props.icons.SortArrow,\n            active: _this2.props.orderBy === columnDef.tableData.id,\n            direction: _this2.props.orderDirection || \"asc\",\n            onClick: function onClick() {\n              var orderDirection = columnDef.tableData.id !== _this2.props.orderBy ? \"asc\" : _this2.props.orderDirection === \"asc\" ? \"desc\" : _this2.props.orderDirection === \"desc\" && _this2.props.thirdSortClick ? \"\" : _this2.props.orderDirection === \"desc\" && !_this2.props.thirdSortClick ? \"asc\" : _this2.props.orderDirection === \"\" ? \"asc\" : \"desc\";\n\n              _this2.props.onOrderChange(columnDef.tableData.id, orderDirection);\n            }\n          }, content);\n        }\n\n        if (columnDef.tooltip) {\n          content = /*#__PURE__*/React.createElement(_core.Tooltip, {\n            title: columnDef.tooltip,\n            placement: \"bottom\"\n          }, /*#__PURE__*/React.createElement(\"span\", null, content));\n        }\n\n        if (_this2.props.options.tableLayout === \"fixed\" && _this2.props.options.columnResizable && columnDef.resizable !== false) {\n          content = /*#__PURE__*/React.createElement(\"div\", {\n            style: {\n              display: \"flex\",\n              alignItems: \"center\"\n            }\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            style: {\n              flex: 1\n            }\n          }, content), /*#__PURE__*/React.createElement(\"div\", null), /*#__PURE__*/React.createElement(_this2.props.icons.Resize, {\n            style: {\n              cursor: \"e-resize\",\n              color: _this2.state.resizingColumnDef && _this2.state.resizingColumnDef.tableData.id === columnDef.tableData.id ? _this2.props.theme.palette.primary.main : \"inherit\"\n            },\n            onMouseDown: function onMouseDown(e) {\n              return _this2.handleMouseDown(e, columnDef);\n            }\n          }));\n        }\n\n        var cellAlignment = columnDef.align !== undefined ? columnDef.align : [\"numeric\", \"currency\"].indexOf(columnDef.type) !== -1 ? \"right\" : \"left\";\n        return /*#__PURE__*/React.createElement(_TableCell[\"default\"], {\n          key: columnDef.tableData.id,\n          align: cellAlignment,\n          className: _this2.props.classes.header,\n          style: _this2.getCellStyle(columnDef),\n          size: size\n        }, content);\n      });\n      return mapArr;\n    }\n  }, {\n    key: \"renderActionsHeader\",\n    value: function renderActionsHeader() {\n      var localization = (0, _objectSpread2[\"default\"])({}, MTableHeader.defaultProps.localization, this.props.localization);\n      var width = CommonValues.actionsColumnWidth(this.props);\n      return /*#__PURE__*/React.createElement(_TableCell[\"default\"], {\n        key: \"key-actions-column\",\n        padding: \"checkbox\",\n        className: this.props.classes.header,\n        style: (0, _objectSpread2[\"default\"])({}, this.props.headerStyle, {\n          width: width,\n          textAlign: \"center\",\n          boxSizing: \"border-box\"\n        })\n      }, /*#__PURE__*/React.createElement(_TableSortLabel[\"default\"], {\n        hideSortIcon: true,\n        disabled: true\n      }, localization.actions));\n    }\n  }, {\n    key: \"renderSelectionHeader\",\n    value: function renderSelectionHeader() {\n      var _this3 = this;\n\n      var selectionWidth = CommonValues.selectionMaxWidth(this.props, this.props.treeDataMaxLevel);\n      return /*#__PURE__*/React.createElement(_TableCell[\"default\"], {\n        padding: \"none\",\n        key: \"key-selection-column\",\n        className: this.props.classes.header,\n        style: (0, _objectSpread2[\"default\"])({}, this.props.headerStyle, {\n          width: selectionWidth\n        })\n      }, this.props.showSelectAllCheckbox && /*#__PURE__*/React.createElement(_Checkbox[\"default\"], (0, _extends2[\"default\"])({\n        indeterminate: this.props.selectedCount > 0 && this.props.selectedCount < this.props.dataCount,\n        checked: this.props.dataCount > 0 && this.props.selectedCount === this.props.dataCount,\n        onChange: function onChange(event, checked) {\n          return _this3.props.onAllSelected && _this3.props.onAllSelected(checked);\n        }\n      }, this.props.options.headerSelectionProps)));\n    }\n  }, {\n    key: \"renderDetailPanelColumnCell\",\n    value: function renderDetailPanelColumnCell() {\n      return /*#__PURE__*/React.createElement(_TableCell[\"default\"], {\n        padding: \"none\",\n        key: \"key-detail-panel-column\",\n        className: this.props.classes.header,\n        style: (0, _objectSpread2[\"default\"])({}, this.props.headerStyle)\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this; // const log = this.props.columns.map(c => c.field + \": \" + c.tableData.width + \", \" + c.tableData.initialWidth + \", \" + c.tableData.additionalWidth).join('\\r\\n');\n      // console.log(\"===============================\");\n      // console.log(log);\n      // console.log(\"===============================\");\n\n\n      var headers = this.renderHeader();\n\n      if (this.props.hasSelection) {\n        headers.splice(0, 0, this.renderSelectionHeader());\n      }\n\n      if (this.props.showActionsColumn) {\n        if (this.props.actionsHeaderIndex >= 0) {\n          var endPos = 0;\n\n          if (this.props.hasSelection) {\n            endPos = 1;\n          }\n\n          headers.splice(this.props.actionsHeaderIndex + endPos, 0, this.renderActionsHeader());\n        } else if (this.props.actionsHeaderIndex === -1) {\n          headers.push(this.renderActionsHeader());\n        }\n      }\n\n      if (this.props.hasDetailPanel) {\n        if (this.props.detailPanelColumnAlignment === \"right\") {\n          headers.push(this.renderDetailPanelColumnCell());\n        } else {\n          headers.splice(0, 0, this.renderDetailPanelColumnCell());\n        }\n      }\n\n      if (this.props.isTreeData > 0) {\n        headers.splice(0, 0, /*#__PURE__*/React.createElement(_TableCell[\"default\"], {\n          padding: \"none\",\n          key: \"key-tree-data-header\",\n          className: this.props.classes.header,\n          style: (0, _objectSpread2[\"default\"])({}, this.props.headerStyle)\n        }));\n      }\n\n      this.props.columns.filter(function (columnDef) {\n        return columnDef.tableData.groupOrder > -1;\n      }).forEach(function (columnDef) {\n        headers.splice(0, 0, /*#__PURE__*/React.createElement(_TableCell[\"default\"], {\n          padding: \"checkbox\",\n          key: \"key-group-header\" + columnDef.tableData.id,\n          className: _this4.props.classes.header\n        }));\n      });\n      return /*#__PURE__*/React.createElement(_TableHead[\"default\"], null, /*#__PURE__*/React.createElement(_TableRow[\"default\"], null, headers));\n    }\n  }]);\n  return MTableHeader;\n}(React.Component);\n\nexports.MTableHeader = MTableHeader;\nMTableHeader.defaultProps = {\n  dataCount: 0,\n  hasSelection: false,\n  headerStyle: {},\n  selectedCount: 0,\n  sorting: true,\n  localization: {\n    actions: \"Actions\"\n  },\n  orderBy: undefined,\n  orderDirection: \"asc\",\n  actionsHeaderIndex: 0,\n  detailPanelColumnAlignment: \"left\",\n  draggable: true,\n  thirdSortClick: true\n};\nMTableHeader.propTypes = {\n  columns: _propTypes[\"default\"].array.isRequired,\n  dataCount: _propTypes[\"default\"].number,\n  hasDetailPanel: _propTypes[\"default\"].bool.isRequired,\n  detailPanelColumnAlignment: _propTypes[\"default\"].string,\n  hasSelection: _propTypes[\"default\"].bool,\n  headerStyle: _propTypes[\"default\"].object,\n  localization: _propTypes[\"default\"].object,\n  selectedCount: _propTypes[\"default\"].number,\n  sorting: _propTypes[\"default\"].bool,\n  onAllSelected: _propTypes[\"default\"].func,\n  onOrderChange: _propTypes[\"default\"].func,\n  orderBy: _propTypes[\"default\"].number,\n  orderDirection: _propTypes[\"default\"].string,\n  actionsHeaderIndex: _propTypes[\"default\"].number,\n  showActionsColumn: _propTypes[\"default\"].bool,\n  showSelectAllCheckbox: _propTypes[\"default\"].bool,\n  draggable: _propTypes[\"default\"].bool,\n  thirdSortClick: _propTypes[\"default\"].bool,\n  tooltip: _propTypes[\"default\"].string\n};\n\nvar styles = function styles(theme) {\n  return {\n    header: {\n      // display: 'inline-block',\n      position: \"sticky\",\n      top: 0,\n      zIndex: 10,\n      backgroundColor: theme.palette.background.paper // Change according to theme,\n\n    }\n  };\n};\n\nexports.styles = styles;\n\nvar _default = (0, _withStyles[\"default\"])(styles, {\n  withTheme: true\n})(MTableHeader);\n\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"script"}