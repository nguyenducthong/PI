{"ast":null,"code":"import _regeneratorRuntime from \"E:\\\\DoAnTotNghiep\\\\code\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"E:\\\\DoAnTotNghiep\\\\code\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"E:\\\\DoAnTotNghiep\\\\code\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\DoAnTotNghiep\\\\code\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"E:\\\\DoAnTotNghiep\\\\code\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"E:\\\\DoAnTotNghiep\\\\code\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"E:\\\\DoAnTotNghiep\\\\code\\\\Client-V2\\\\src\\\\app\\\\views\\\\dashboard\\\\Analytics.jsx\";\nimport React, { Component, Fragment } from \"react\";\nimport { Grid, Card, Icon, IconButton, Button, Checkbox, Fab, Avatar, Hidden, TextField } from \"@material-ui/core\";\nimport { Breadcrumb, SimpleCard, EgretProgressBar } from \"egret\";\nimport DashboardWelcomeCard from \"../cards/DashboardWelcomeCard\";\nimport DashboardWelcomeHealthOrgCard from \"../cards/DashboardWelcomeHealthOrgCard\";\nimport AreaChart from \"../charts/echarts/AreaChart\";\nimport { format } from \"date-fns\";\nimport ModifiedAreaChart from \"./ModifiedAreaChart\";\nimport { withStyles } from \"@material-ui/styles\";\nimport { useTranslation, withTranslation, Trans } from \"react-i18next\";\nimport ConstantList from \"../../appConfig\";\nimport JwtAuthService from \"../../services/jwtAuthService\";\nimport { Helmet } from \"react-helmet\";\nimport ReactEcharts from \"echarts-for-react\"; // import HomePage from \"../HomePage/HomePage\";\n// import Tab from \"../IntroduceTheProgram/Tab\";\n\nimport { getCurrentUser, getEQARound, countSampleTubeByEQARound } from \"./DashboardService\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\"; //let isAdmin=false;\n\nvar Dashboard1 = /*#__PURE__*/function (_Component) {\n  _inherits(Dashboard1, _Component);\n\n  var _super = _createSuper(Dashboard1);\n\n  function Dashboard1(props) {\n    var _this;\n\n    _classCallCheck(this, Dashboard1);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      user: {},\n      isAdmin: false,\n      isHealthOrg: false,\n      isUser: false,\n      numberOfEQARound: 0,\n      eqaRoundList: [],\n      selectedEQARound: {},\n      barChartData: [],\n      pieChartData: []\n    };\n\n    _this.checkIsAdmin = function () {\n      _this.setState({\n        isAdmin: false\n      });\n\n      if (_this.state.user != null && _this.state.user.roles != null && _this.state.user.roles.length > 0) {\n        _this.state.user.roles.forEach(function (element) {\n          if (element.name == 'ROLE_ADMIN') {\n            _this.setState({\n              isAdmin: true\n            });\n\n            return true;\n          }\n        });\n      }\n    };\n\n    _this.handleSelectEQARound = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(selectedEQARound) {\n        var pieChartData;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _this.getPieChartData(selectedEQARound.id);\n\n              case 2:\n                pieChartData = _context.sent;\n\n                _this.setState({\n                  pieChartData,\n                  selectedEQARound\n                });\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    return _this;\n  }\n\n  _createClass(Dashboard1, [{\n    key: \"componentWillMount\",\n    value: function () {\n      var _componentWillMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var _this2 = this;\n\n        var user, eqaRoundList, selectedEQARound, barChartData, pieChartData;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                user = JwtAuthService.getLoginUser();\n\n                if (user != null && user.roles != null && user.roles.length > 0) {\n                  this.setState({\n                    isHealthOrg: false,\n                    isAdmin: false,\n                    isUser: false\n                  });\n                  user.roles.forEach(function (role) {\n                    if (role.name == \"ROLE_ADMIN\") {\n                      _this2.setState({\n                        isAdmin: true\n                      });\n                    } else if (role.name == \"ROLE_HEALTH_ORG\") {\n                      _this2.setState({\n                        isHealthOrg: true\n                      });\n                    } else if (role.name == \"ROLE_USER\") {\n                      _this2.setState({\n                        isUser: true\n                      });\n                    }\n                  });\n                }\n\n                _context2.next = 4;\n                return getEQARound();\n\n              case 4:\n                eqaRoundList = _context2.sent.data.content;\n                _context2.next = 7;\n                return eqaRoundList[0];\n\n              case 7:\n                selectedEQARound = _context2.sent;\n                _context2.next = 10;\n                return this.getBarChartData();\n\n              case 10:\n                barChartData = _context2.sent;\n                pieChartData = null;\n\n                if (!(selectedEQARound != null)) {\n                  _context2.next = 16;\n                  break;\n                }\n\n                _context2.next = 15;\n                return this.getPieChartData(selectedEQARound.id);\n\n              case 15:\n                pieChartData = _context2.sent;\n\n              case 16:\n                this.setState({\n                  selectedEQARound,\n                  barChartData,\n                  pieChartData\n                });\n\n              case 17:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function componentWillMount() {\n        return _componentWillMount.apply(this, arguments);\n      }\n\n      return componentWillMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          theme = _this$props.theme,\n          t = _this$props.t,\n          i18n = _this$props.i18n; //this.checkIsAdmin();\n\n      var isAdmin = this.state.isAdmin;\n      var _this$state = this.state,\n          barChartData = _this$state.barChartData,\n          pieChartData = _this$state.pieChartData;\n      var bigCardStyle = {\n        height: \"500px\",\n        padding: \"10px\",\n        fontFamily: \"Arial\"\n      };\n      var barChartOptions = {\n        title: {\n          text: t(\"Analytics.registered_units\"),\n          left: \"center\",\n          fontFamily: \"Arial\"\n        },\n        color: [\"#3398DB\"],\n        tooltip: {\n          trigger: \"axis\",\n          axisPointer: {\n            type: \"shadow\"\n          }\n        },\n        grid: {\n          left: \"3%\",\n          right: \"4%\",\n          bottom: \"3%\",\n          containLabel: true\n        },\n        xAxis: [{\n          type: \"category\",\n          axisTick: {\n            alignWithLabel: false\n          }\n        }],\n        yAxis: [{\n          type: \"value\",\n          axisLabel: {\n            show: true\n          },\n          name: t(\"Analytics.number_of_registered_units\"),\n          nameLocation: \"end\",\n          nameTextStyle: {\n            align: \"left\"\n          }\n        }],\n        series: [{\n          name: t(\"Analytics.registered_units\"),\n          type: \"bar\",\n          barWidth: \"60%\",\n          data: barChartData,\n          label: {\n            show: true,\n            position: \"top\"\n          }\n        }]\n      };\n      var pieChartOptions = {\n        title: {\n          text: t(\"Analytics.eqa_round_result\"),\n          left: \"center\",\n          fontFamily: \"Arial\"\n        },\n        tooltip: {\n          trigger: \"item\",\n          formatter: \"{a} <br/>{b} : {c} ({d}%)\"\n        },\n        legend: {\n          orient: \"vertical\",\n          left: \"left\",\n          data: [t(\"Analytics.correct\"), t(\"Analytics.incorrect\"), t(\"Analytics.not_submitted\")]\n        },\n        color: [\"#229955\", \"#ff0000\", \"#9400ff\"],\n        series: [{\n          name: t(\"Analytics.eqa_round_result\"),\n          type: \"pie\",\n          radius: \"55%\",\n          center: [\"50%\", \"60%\"],\n          data: pieChartData,\n          emphasis: {\n            itemStyle: {\n              shadowBlur: 10,\n              shadowOffsetX: 0,\n              shadowColor: \"rgba(0, 0, 0, 0.5)\"\n            }\n          }\n        }]\n      };\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"analytics m-sm-30\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mb-sm-30\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Helmet, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"title\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 13\n        }\n      }, t(\"Dashboard.dashboard\"), \" | \", t(\"web_site\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mb-sm-30\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Breadcrumb, {\n        routeSegments: [{\n          name: t(\"Dashboard.dashboard\")\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        spacing: 3,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        lg: 12,\n        md: 12,\n        sm: 12,\n        xs: 12,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }\n      })));\n    }\n  }]);\n\n  return Dashboard1;\n}(Component);\n\nexport default withStyles({}, {\n  withTheme: true\n})(Dashboard1);","map":{"version":3,"sources":["E:/DoAnTotNghiep/code/Client-V2/src/app/views/dashboard/Analytics.jsx"],"names":["React","Component","Fragment","Grid","Card","Icon","IconButton","Button","Checkbox","Fab","Avatar","Hidden","TextField","Breadcrumb","SimpleCard","EgretProgressBar","DashboardWelcomeCard","DashboardWelcomeHealthOrgCard","AreaChart","format","ModifiedAreaChart","withStyles","useTranslation","withTranslation","Trans","ConstantList","JwtAuthService","Helmet","ReactEcharts","getCurrentUser","getEQARound","countSampleTubeByEQARound","Autocomplete","Dashboard1","props","state","user","isAdmin","isHealthOrg","isUser","numberOfEQARound","eqaRoundList","selectedEQARound","barChartData","pieChartData","checkIsAdmin","setState","roles","length","forEach","element","name","handleSelectEQARound","getPieChartData","id","getLoginUser","role","data","content","getBarChartData","theme","t","i18n","bigCardStyle","height","padding","fontFamily","barChartOptions","title","text","left","color","tooltip","trigger","axisPointer","type","grid","right","bottom","containLabel","xAxis","axisTick","alignWithLabel","yAxis","axisLabel","show","nameLocation","nameTextStyle","align","series","barWidth","label","position","pieChartOptions","formatter","legend","orient","radius","center","emphasis","itemStyle","shadowBlur","shadowOffsetX","shadowColor","withTheme"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport {\n  Grid,\n  Card,\n  Icon,\n  IconButton,\n  Button,\n  Checkbox,\n  Fab,\n  Avatar,\n  Hidden,\n  TextField\n} from \"@material-ui/core\";\nimport { Breadcrumb, SimpleCard, EgretProgressBar } from \"egret\";\nimport DashboardWelcomeCard from \"../cards/DashboardWelcomeCard\";\nimport DashboardWelcomeHealthOrgCard from \"../cards/DashboardWelcomeHealthOrgCard\";\nimport AreaChart from \"../charts/echarts/AreaChart\";\nimport { format } from \"date-fns\";\nimport ModifiedAreaChart from \"./ModifiedAreaChart\";\nimport { withStyles } from \"@material-ui/styles\";\nimport { useTranslation, withTranslation, Trans } from \"react-i18next\";\nimport ConstantList from \"../../appConfig\";\nimport JwtAuthService from \"../../services/jwtAuthService\";\nimport { Helmet } from \"react-helmet\";\nimport ReactEcharts from \"echarts-for-react\";\n// import HomePage from \"../HomePage/HomePage\";\n// import Tab from \"../IntroduceTheProgram/Tab\";\n\nimport {\n  getCurrentUser,\n  getEQARound,\n  countSampleTubeByEQARound\n} from \"./DashboardService\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\n//let isAdmin=false;\nclass Dashboard1 extends Component {\n  state = {\n    user: {},\n    isAdmin: false,\n    isHealthOrg: false,\n    isUser: false,\n    numberOfEQARound: 0,\n    eqaRoundList: [],\n    selectedEQARound: {},\n    barChartData: [],\n    pieChartData: []\n  };\n  constructor(props) {\n    super(props);\n  }\n  checkIsAdmin = ()=>{\n    this.setState({isAdmin:false})\n    if(this.state.user!=null && this.state.user.roles!=null && this.state.user.roles.length>0){\n      this.state.user.roles.forEach(element => {\n        if(element.name=='ROLE_ADMIN'){\n          this.setState({isAdmin:true})\n          return true;\n        }\n      });\n    }\n  }\n\n  handleSelectEQARound = async selectedEQARound => {\n    const pieChartData = await this.getPieChartData(selectedEQARound.id);\n    this.setState({\n      pieChartData,\n      selectedEQARound\n    });\n  };\n \n  async componentWillMount() {\n    let  user=JwtAuthService.getLoginUser();\n    if (user != null && user.roles != null && user.roles.length > 0) {\n \n      this.setState({\n        isHealthOrg: false,\n        isAdmin: false,\n        isUser: false\n      });      \n      user.roles.forEach(role => {      \n        if (role.name == \"ROLE_ADMIN\") {\n          this.setState({ isAdmin: true });\n        } else if (role.name == \"ROLE_HEALTH_ORG\") {\n          this.setState({ isHealthOrg: true });\n        } else if (role.name == \"ROLE_USER\") {\n          this.setState({ isUser: true });\n        } \n      });\n    }\n\n    var eqaRoundList = (await getEQARound()).data.content;\n    var selectedEQARound = await eqaRoundList[0];\n    var barChartData = await this.getBarChartData();\n\n    var pieChartData = null;\n    if(selectedEQARound!=null)\n      pieChartData= await this.getPieChartData(selectedEQARound.id);\n\n    this.setState({\n      selectedEQARound,\n      barChartData,\n      pieChartData\n    });\n  }\n\n  render() {\n    \n    let { theme, t, i18n } = this.props;\n    //this.checkIsAdmin();\n    let isAdmin = this.state.isAdmin;\n    const {\n  \n      barChartData,\n      pieChartData\n    } = this.state;\n    const bigCardStyle = {\n      height: \"500px\",\n      padding: \"10px\",\n      fontFamily: \"Arial\"\n    };\n\n    const barChartOptions = {\n      title: {\n        text: t(\"Analytics.registered_units\"),  \n        left: \"center\",\n        fontFamily: \"Arial\"\n      },\n      color: [\"#3398DB\"],\n      tooltip: {\n        trigger: \"axis\",\n        axisPointer: { type: \"shadow\" }\n      },\n      grid: {\n        left: \"3%\",\n        right: \"4%\",\n        bottom: \"3%\",\n        containLabel: true\n      },\n      xAxis: [\n        {\n          type: \"category\",\n          axisTick: {\n            alignWithLabel: false\n          }\n        }\n      ],\n      yAxis: [\n        {\n          type: \"value\",\n          axisLabel: {\n            show: true\n          },\n          name: t(\"Analytics.number_of_registered_units\"),\n          nameLocation: \"end\",\n          nameTextStyle: {\n            align: \"left\"\n          }\n        }\n      ],\n      series: [\n        {\n          name: t(\"Analytics.registered_units\"),\n          type: \"bar\",\n          barWidth: \"60%\",\n          data: barChartData,\n          label: {\n            show: true,\n            position: \"top\"\n          }\n        }\n      ]\n    };\n\n    const pieChartOptions = {\n      title: {\n        text: t(\"Analytics.eqa_round_result\"),\n        left: \"center\",\n        fontFamily: \"Arial\"\n      },\n      tooltip: {\n        trigger: \"item\",\n        formatter: \"{a} <br/>{b} : {c} ({d}%)\"\n      },\n      legend: {\n        orient: \"vertical\",\n        left: \"left\",\n        data: [\n          t(\"Analytics.correct\"),\n          t(\"Analytics.incorrect\"),\n          t(\"Analytics.not_submitted\")\n        ]\n      },\n      color: [\"#229955\", \"#ff0000\", \"#9400ff\"],\n      series: [\n        {\n          name: t(\"Analytics.eqa_round_result\"),\n          type: \"pie\",\n          radius: \"55%\",\n          center: [\"50%\", \"60%\"],\n          data: pieChartData,\n          emphasis: {\n            itemStyle: {\n              shadowBlur: 10,\n              shadowOffsetX: 0,\n              shadowColor: \"rgba(0, 0, 0, 0.5)\"\n            }\n          }\n        }\n      ]\n    };\n    return (\n      <div className=\"analytics m-sm-30\">\n        <div className=\"mb-sm-30\">\n          <Helmet>\n            <title>\n              {t(\"Dashboard.dashboard\")} | {t(\"web_site\")}\n            </title>\n          </Helmet>\n\n          <div className=\"mb-sm-30\">\n            <Breadcrumb routeSegments={[{ name: t(\"Dashboard.dashboard\") }]} />\n          </div>\n        </div>\n        <Grid container spacing={3}>\n          <Grid item lg={12} md={12} sm={12} xs={12}>   \n      \n          {/* {isAdmin && (\n            <Tab t={t}/>\n          )}\n          {!isAdmin && (\n            <HomePage t={t} />\n          )} */}\n          </Grid>\n        </Grid>\n      </div>\n    );\n  }\n}\n\nexport default withStyles({}, { withTheme: true })(Dashboard1);\n"]},"metadata":{},"sourceType":"module"}