{"ast":null,"code":"import _objectSpread from \"E:\\\\DoAnTotNghiep\\\\code\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _regeneratorRuntime from \"E:\\\\DoAnTotNghiep\\\\code\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"E:\\\\DoAnTotNghiep\\\\code\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"E:\\\\DoAnTotNghiep\\\\code\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\DoAnTotNghiep\\\\code\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"E:\\\\DoAnTotNghiep\\\\code\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"E:\\\\DoAnTotNghiep\\\\code\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"E:\\\\DoAnTotNghiep\\\\code\\\\Client-V2\\\\src\\\\app\\\\views\\\\EQAResultReportConclusion\\\\EQAResultReportConclusionDialog.jsx\";\nimport React, { Component } from \"react\";\nimport { Dialog, Button, Grid, Select, InputAdornment, FormControl, MenuItem, DialogTitle, DialogContent, DialogActions, FormHelperText, FormControlLabel, Checkbox, TableBody, TableCell, TableContainer, Table, TableRow, TableHead, Icon, IconButton } from \"@material-ui/core\";\nimport shortid from \"shortid\";\nimport PropTypes from \"prop-types\";\nimport ConstantList from \"../../appConfig\";\nimport { Breadcrumb, ConfirmationDialog } from \"egret\";\nimport MaterialTable, { MTableToolbar, Chip, MTableBody, MTableHeader } from 'material-table';\nimport { ValidatorForm, TextValidator, TextField } from \"react-material-ui-form-validator\";\nimport { updateResultReportConclusionBySampleTube } from \"./EQAResultReportConclusionServices\";\nimport Draggable from 'react-draggable';\nimport Paper from '@material-ui/core/Paper';\nimport { MuiPickersUtilsProvider, DateTimePicker } from \"@material-ui/pickers\";\nimport DateFnsUtils from \"@date-io/date-fns\";\nimport AsynchronousAutocomplete from \"../utilities/AsynchronousAutocomplete\";\nimport { searchByPage as reagentSearchByPage } from \"../Reagent/ReagentService\";\nimport { searchByPage as getAllEQARound } from \"../EQARound/EQARoundService\";\nimport { getListHealthOrgEQARoundByEQARoundIdAndUser } from \"./EQAResultReportConclusionServices\";\nimport EQAResultReportElisaDialog from \"../EQAResultReportElisa/EQAResultReportElisaDialog\";\nimport EQAResultReportFastTestEditorDialog from \"../EQAResultReportFastTest/EQAResultReportFastTestEditorDialog\";\nimport EQAResultReportSerodiaDialog from \"../EQAResultReportSerodia/EQAResultReportSerodiaDialog\";\nimport EQAResultReportEcliaEditorDialog from \"../EQAResultReportEclia/EQAResultReportEcliaEditorDialog\";\nimport { getAllResultByHealthOrgEQARoundId, getResultReportById, getItemById } from \"../ResultsOfTheUnits/ResultsOfTheUnitsService\";\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport '../../../styles/views/_loadding.scss';\nimport '../../../styles/views/_style.scss';\nimport clsx from 'clsx';\nimport CircularProgress from '@material-ui/core/CircularProgress';\ntoast.configure({\n  autoClose: 3000,\n  draggable: false,\n  limit: 3\n});\n\nfunction PaperComponent(props) {\n  return /*#__PURE__*/React.createElement(Draggable, {\n    handle: \"#draggable-dialog-title\",\n    cancel: '[class*=\"MuiDialogContent-root\"]',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Paper, Object.assign({}, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  })));\n}\n\nvar EQAResultReportConclusionDialog = /*#__PURE__*/function (_Component) {\n  _inherits(EQAResultReportConclusionDialog, _Component);\n\n  var _super = _createSuper(EQAResultReportConclusionDialog);\n\n  function EQAResultReportConclusionDialog(props) {\n    var _this;\n\n    _classCallCheck(this, EQAResultReportConclusionDialog);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      isViewButton: false,\n      hasErrorHealthOrgRound: false,\n      hasErrorEQARound: false,\n      isUsingIQC: false,\n      isUsingControlLine: false,\n      eqaRound: '',\n      healthOrgRound: '',\n      reagentLot: '',\n      order: '',\n      reagent: null,\n      technician: null,\n      personBuyReagent: '',\n      details: [],\n      supplyOfReagent: '',\n      timeToResult: '',\n      reagentExpiryDate: null,\n      testDate: new Date(),\n      reagentUnBoxDate: null,\n      shouldOpenSearchDialog: false,\n      shouldOpenConfirmationDialog: false,\n      shouldOpenSearchEQASampleSearchDialog: false,\n      shouldOpenViewDialogElisa: false,\n      shouldOpenViewDialogFastTest: false,\n      shouldOpenViewDialogSerodia: false,\n      shouldOpenViewDialogEclia: false,\n      isFinalResult: false,\n      view: false,\n      sampleTubeResultConclusionList: [],\n      loading: false\n    };\n\n    _this.handleDateChange = function (date, name) {\n      _this.setState({\n        [name]: date\n      });\n    };\n\n    _this.handleChange = function (event, source) {\n      event.persist();\n\n      if (source === \"switch\") {\n        _this.setState({\n          isActive: event.target.checked\n        });\n\n        return;\n      }\n\n      if (source === \"isFinalResult\") {\n        _this.setState({\n          isFinalResult: event.target.checked\n        });\n      }\n\n      _this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    _this.handleHealthOrgRoundChange = function (event, source) {\n      event.persist();\n\n      if (source === \"switch\") {\n        _this.setState({\n          isActive: event.target.checked\n        });\n\n        return;\n      }\n    };\n\n    _this.handleDialogClose = function () {\n      _this.setState({\n        shouldOpenViewDialogElisa: false,\n        shouldOpenViewDialogFastTest: false,\n        shouldOpenViewDialogSerodia: false,\n        shouldOpenViewDialogEclia: false,\n        shouldOpenConfirmationDialog: false\n      });\n    };\n\n    _this.handleHealthOrgRoundPopupClose = function () {\n      _this.setState({\n        shouldOpenHealthOrgRoundPopup: false\n      }, function () {});\n    };\n\n    _this.checkResult = function (list) {\n      var isCheck = true;\n\n      if (list != null && list.length > 0) {\n        list.forEach(function (item) {\n          if (item.typeMethod != null && item.typeMethod == 5) {\n            isCheck = false;\n          }\n        });\n      }\n\n      if (isCheck) {\n        _this.setState({\n          view: true\n        });\n      }\n    };\n\n    _this.handleRowDataCellChange = function (event, index) {\n      var sampleTubeResultConclusionList = _this.state.sampleTubeResultConclusionList;\n      var p = sampleTubeResultConclusionList[index]; // console.log(index)\n      // console.log(p)\n\n      p.result = event.target.value; // console.log(p)\n\n      sampleTubeResultConclusionList.splice(index, 1, p);\n\n      _this.setState({\n        sampleTubeResultConclusionList\n      }, function () {// console.log(this.state.sampleTubeResultConclusionList)\n      });\n    };\n\n    _this.openCircularProgress = function () {\n      _this.setState({\n        loading: true\n      });\n    };\n\n    _this.handleFormSubmit = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var t, _this$state, sampleTubeResultConclusionList, currentHealthOrgEQARound, isFinalResult;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _this.openCircularProgress();\n\n            case 2:\n              t = _this.props.t;\n              _this$state = _this.state, sampleTubeResultConclusionList = _this$state.sampleTubeResultConclusionList, currentHealthOrgEQARound = _this$state.currentHealthOrgEQARound, isFinalResult = _this$state.isFinalResult;\n\n              if (sampleTubeResultConclusionList.length === 0) {\n                toast.warn(t(\"EQAResultReportConclusion.no_data\"));\n              } else {\n                updateResultReportConclusionBySampleTube(sampleTubeResultConclusionList, currentHealthOrgEQARound.id, isFinalResult).then(function (res) {\n                  // this.props.handleOKEditClose();\n                  toast.success(t(\"EQAResultReportConclusion.update_result_success\"));\n\n                  _this.setState({\n                    loading: false\n                  });\n                }).catch(function (err) {\n                  toast.error(t(\"EQAResultReportConclusion.update_result_error\"));\n\n                  _this.setState({\n                    loading: false\n                  });\n                });\n              }\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    _this.notificationFinalResult = function () {\n      _this.setState({\n        shouldOpenConfirmationDialog: true\n      });\n    };\n\n    _this.handleFinalResult = function () {\n      if (_this.state.isFinalResult == null || !_this.state.isFinalResult) {\n        _this.setState({\n          isFinalResult: true,\n          dateSubmitResults: new Date()\n        }, function () {});\n\n        _this.handleDialogClose();\n      }\n\n      if (_this.state.isFinalResult) {\n        _this.setState({\n          isFinalResult: false,\n          dateSubmitResults: new Date()\n        }, function () {});\n\n        _this.handleDialogClose();\n      }\n    };\n\n    _this.handleDialogFinalResultClose = function () {\n      // this.setState({isFinalResult:false},()=>{\n      // })\n      _this.handleDialogClose();\n    };\n\n    return _this;\n  }\n\n  _createClass(EQAResultReportConclusionDialog, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this$props = this.props,\n          open = _this$props.open,\n          handleClose = _this$props.handleClose,\n          item = _this$props.item,\n          sampleTubeResultConclusionList = _this$props.sampleTubeResultConclusionList,\n          currentHealthOrgEQARound = _this$props.currentHealthOrgEQARound,\n          currentHealthOrg = _this$props.currentHealthOrg;\n\n      if (sampleTubeResultConclusionList != null && currentHealthOrgEQARound != null) {\n        this.setState({\n          sampleTubeResultConclusionList,\n          currentHealthOrgEQARound,\n          currentHealthOrg\n        }, function () {\n          var _this2 = this;\n\n          var currentHealthOrgEQARound = this.state.currentHealthOrgEQARound;\n\n          if (currentHealthOrgEQARound && currentHealthOrgEQARound.id) {\n            getItemById(currentHealthOrgEQARound.id).then(function (data) {\n              _this2.setState({\n                healthOrgRound: data.data\n              }, function () {\n                var _this3 = this;\n\n                var _this$state2 = this.state,\n                    healthOrgRound = _this$state2.healthOrgRound,\n                    details = _this$state2.details;\n                details = [];\n                getAllResultByHealthOrgEQARoundId(healthOrgRound.id).then(function (result) {\n                  if (result != null && result.data != null) {\n                    _this3.checkResult(result.data);\n\n                    if (result.data != null) {\n                      result.data.forEach(function (el) {\n                        if (el.typeMethod === 5) {\n                          _this3.setState({\n                            isFinalResult: el.isFinalResult\n                          });\n                        }\n                      });\n                    }\n\n                    _this3.setState({\n                      listResult: result.data\n                    }, function () {\n                      var sampleSet = healthOrgRound.sampleSet,\n                          listSample = healthOrgRound.listSample;\n                      listSample = [];\n\n                      if (sampleSet != null && sampleSet.details != null && sampleSet.details.length > 0) {\n                        sampleSet.details.sort(function (a, b) {\n                          return a.orderNumber > b.orderNumber ? 1 : a.orderNumber === b.orderNumber ? a.sampleTube.code > b.sampleTube.code ? 1 : -1 : -1;\n                        });\n                        sampleSet.details.forEach(function (sampleSetDetail) {\n                          var eQASet = {};\n                          var hor = {};\n                          hor.tubeID = sampleSetDetail.sample.id;\n                          hor.tubeCode = sampleSetDetail.code;\n                          eQASet.id = sampleSetDetail.sample.id;\n                          eQASet.code = sampleSetDetail.code;\n                          listSample.push(eQASet);\n                        });\n                        this.setState({\n                          listSample: listSample\n                        });\n                      }\n                    });\n                  }\n                });\n              });\n            });\n          }\n        });\n      }\n\n      if (item && item.details && item.details.length > 0) {\n        item.details.sort(function (a, b) {\n          return a.orderNumber > b.orderNumber ? 1 : a.orderNumber === b.orderNumber ? a.sampleTube.code > b.sampleTube.code ? 1 : -1 : -1;\n        });\n      }\n\n      this.setState(_objectSpread(_objectSpread({}, item), {}, {\n        hasErrorResult: false\n      }), function () {});\n    }\n  }, {\n    key: \"renderRowHead\",\n    value: function renderRowHead() {\n      var _this4 = this;\n\n      var isCheck = false;\n      var _this$props2 = this.props,\n          onSelectEvent = _this$props2.onSelectEvent,\n          handleDelete = _this$props2.handleDelete,\n          handleClick = _this$props2.handleClick;\n      var _this$state3 = this.state,\n          listResult = _this$state3.listResult,\n          view = _this$state3.view;\n      var titleCell = null;\n\n      if (listResult != null && listResult.length > 0) {\n        listResult.forEach(function (item) {\n          if (!titleCell) {\n            titleCell = /*#__PURE__*/React.createElement(TableCell, {\n              key: shortid.generate(),\n              className: \"px-0\",\n              align: \"left\",\n              __self: _this4,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 23\n              }\n            }, _this4.getTypeMethodName(item.typeMethod));\n          } else {\n            titleCell += /*#__PURE__*/React.createElement(TableCell, {\n              key: shortid.generate(),\n              className: \"px-0\",\n              align: \"left\",\n              __self: _this4,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 24\n              }\n            }, _this4.getTypeMethodName(item.typeMethod));\n          }\n        });\n      }\n\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 7\n        }\n      }, listResult.map(function (item, index) {\n        return _this4.renderColHeadFirst(item);\n      }));\n    }\n  }, {\n    key: \"renderColHeadFirst\",\n    value: function renderColHeadFirst(item) {\n      if (item.reagent != null) {\n        item.title = this.getTypeMethodName(item.reagent.name, item.typeMethod);\n      } else if (item.typeMethod == 5) {\n        item.title = this.getTypeMethodName(\"\", item.typeMethod);\n      }\n\n      return this.renderHeadCells(item);\n    }\n  }, {\n    key: \"renderHeadCells\",\n    value: function renderHeadCells(item) {\n      if (item == null) {\n        item = {};\n      }\n\n      var titleCell = /*#__PURE__*/React.createElement(TableCell, {\n        key: shortid.generate(),\n        className: \"px-0\",\n        align: \"left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 21\n        }\n      }, item.title);\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 7\n        }\n      }, titleCell);\n    }\n  }, {\n    key: \"getTypeMethodName\",\n    value: function getTypeMethodName(text, type) {\n      var t = this.props.t;\n\n      if (type == 1) {\n        return text;\n      } else if (type == 2) {\n        return text;\n      } else if (type == 3) {\n        return text;\n      } else if (type == 4) {\n        return text;\n      } else if (type == 5) {\n        return t('EQAResultReportConclusion.final_conclusion');\n      }\n    }\n  }, {\n    key: \"renderResultDetails\",\n    value: function renderResultDetails(sample, index) {\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(TableRow, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 9\n        }\n      }, this.renderSample(sample, index)));\n    }\n  }, {\n    key: \"renderSample\",\n    value: function renderSample(item, index) {\n      var _this5 = this;\n\n      var sampleTubeResultConclusionList = this.state.sampleTubeResultConclusionList;\n      var t = this.props.t;\n      var sttCell = /*#__PURE__*/React.createElement(TableCell, {\n        className: \"px-0\",\n        align: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 19\n        }\n      }, index + 1);\n      var titleCell = /*#__PURE__*/React.createElement(TableCell, {\n        className: \"px-0\",\n        align: \"left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 21\n        }\n      }, item ? item.code : '');\n      var resultTableAll = /*#__PURE__*/React.createElement(TableCell, {\n        className: \"px-0\",\n        align: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 26\n        }\n      }, /*#__PURE__*/React.createElement(FormControl, {\n        className: \"w-100\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Select, {\n        style: {\n          textAlign: \"left\"\n        },\n        value: sampleTubeResultConclusionList[index] ? sampleTubeResultConclusionList[index].result : null,\n        onChange: function onChange(result) {\n          return _this5.handleRowDataCellChange(result, index);\n        },\n        inputProps: {\n          name: \"result\",\n          id: \"result-simple\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(MenuItem, {\n        value: -2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 11\n        }\n      }, t(\"EQAResultReportElisa.Result.none\")), /*#__PURE__*/React.createElement(MenuItem, {\n        value: -1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 11\n        }\n      }, t(\"EQAResultReportElisa.Result.negative\")), /*#__PURE__*/React.createElement(MenuItem, {\n        value: 0,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 11\n        }\n      }, t(\"EQAResultReportElisa.Result.indertermine\")), /*#__PURE__*/React.createElement(MenuItem, {\n        value: 1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 11\n        }\n      }, t(\"EQAResultReportElisa.Result.positive\")), /*#__PURE__*/React.createElement(MenuItem, {\n        value: 2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 11\n        }\n      }, t(\"EQAResultReportElisa.Result.confirms\")))));\n      var resultTable = /*#__PURE__*/React.createElement(TableCell, {\n        className: \"px-0\",\n        align: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(FormControl, {\n        className: \"w-100\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Select, {\n        style: {\n          textAlign: \"left\"\n        },\n        value: sampleTubeResultConclusionList[index] ? sampleTubeResultConclusionList[index].result : null,\n        onChange: function onChange(result) {\n          return _this5.handleRowDataCellChange(result, index);\n        },\n        inputProps: {\n          name: \"result\",\n          id: \"result-simple\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(MenuItem, {\n        value: -2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 11\n        }\n      }, t(\"EQAResultReportElisa.Result.none\")), /*#__PURE__*/React.createElement(MenuItem, {\n        value: -1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 11\n        }\n      }, t(\"EQAResultReportElisa.Result.negative\")), /*#__PURE__*/React.createElement(MenuItem, {\n        value: 0,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 11\n        }\n      }, t(\"EQAResultReportElisa.Result.indertermine\")), /*#__PURE__*/React.createElement(MenuItem, {\n        value: 1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 11\n        }\n      }, t(\"EQAResultReportElisa.Result.positive\")))));\n      var result = /*#__PURE__*/React.createElement(TableCell, {\n        className: \"px-0\",\n        align: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 18\n        }\n      }, /*#__PURE__*/React.createElement(FormControl, {\n        className: \"w-100\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Select, {\n        style: {\n          textAlign: \"left\"\n        },\n        value: sampleTubeResultConclusionList[index] ? sampleTubeResultConclusionList[index].result : null,\n        onChange: function onChange(result) {\n          return _this5.handleRowDataCellChange(result, index);\n        },\n        inputProps: {\n          name: \"result\",\n          id: \"result-simple\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(MenuItem, {\n        value: -2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 11\n        }\n      }, t(\"EQAResultReportElisa.Result.none\")), /*#__PURE__*/React.createElement(MenuItem, {\n        value: -1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 11\n        }\n      }, t(\"EQAResultReportElisa.Result.negative\")), /*#__PURE__*/React.createElement(MenuItem, {\n        value: 0,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 11\n        }\n      }, t(\"EQAResultReportElisa.Result.indertermine\")), /*#__PURE__*/React.createElement(MenuItem, {\n        value: 2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 11\n        }\n      }, t(\"EQAResultReportElisa.Result.confirms\")))));\n      var _this$state4 = this.state,\n          listResult = _this$state4.listResult,\n          currentHealthOrg = _this$state4.currentHealthOrg;\n      var cellContentByMethod = []; // let {sampleTubeResultConclusionList} = this.state\n\n      listResult.forEach(function (result) {\n        var content = null;\n\n        if (result != null && result.details != null && result.details.length > 0 && item) {\n          result.details.forEach(function (resultDetail) {\n            if (resultDetail.sampleTube != null && resultDetail.sampleTube.eqaSample != null && item.id == resultDetail.sampleTube.eqaSample.id) {\n              if (result.typeMethod != 5) {\n                content = resultDetail;\n                cellContentByMethod.push(content);\n              }\n            }\n          });\n        }\n      });\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 7\n        }\n      }, sttCell, titleCell, cellContentByMethod.map(function (cell, index) {\n        return _this5.renderCells(cell);\n      }), resultTableAll);\n    }\n  }, {\n    key: \"renderCells\",\n    value: function renderCells(item) {\n      var _this6 = this;\n\n      var _this$props3 = this.props,\n          t = _this$props3.t,\n          i18n = _this$props3.i18n;\n\n      if (item == null) {\n        item = {};\n      }\n\n      var contentCell = /*#__PURE__*/React.createElement(TableCell, {\n        key: shortid.generate(),\n        className: \"px-0\",\n        align: \"left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 23\n        }\n      }, item.result == 1 ? /*#__PURE__*/React.createElement(\"small\", {\n        className: \"border-radius-4 bg-primary text-white px-8 py-2 \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        href: \"#\",\n        onClick: function onClick() {\n          return _this6.openDialogDetailCellContent(item);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 13\n        }\n      }, t('result.positive'))) : /*#__PURE__*/React.createElement(\"small\", {\n        className: \"border-radius-4 bg-light-gray px-8 py-2 \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        href: \"#\",\n        onClick: function onClick() {\n          return _this6.openDialogDetailCellContent(item);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 15\n        }\n      }, item.result == -2 ? t('result.none') : item.result == -1 ? t('result.negative') : item.result == 0 ? t('result.indertermine') : item.result == 2 ? t('EQAResultReportElisa.Result.confirms') : '')));\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 7\n        }\n      }, contentCell);\n    }\n  }, {\n    key: \"openDialogDetailCellContent\",\n    value: function openDialogDetailCellContent(resultReportDetail) {\n      var _this7 = this;\n\n      if (resultReportDetail != null && resultReportDetail.resultReport != null && resultReportDetail.resultReport.id != null) {\n        getResultReportById(resultReportDetail.resultReport.id).then(function (result) {\n          var item = result.data;\n          item.isView = true;\n\n          _this7.setState({\n            item: item\n          }, function () {\n            //Elisa(1),//Kết Quả Xét Nghiệm Bằng Kỹ Thuật Elisa\n            //FastTest(2),//Kết Quả Xét Nghiệm Bằng Kỹ Thuật Xét Nghiệm Nhanh\n            //SERODIA(3)//Kết Quả Xét Nghiệm Bằng Kỹ Thuật SERODIA\n            //ECLIA(4)//KẾT QUẢ ĐIỆN/HÓA PHÁT QUANG\n            if (item.typeMethod == 1) {\n              this.setState({\n                shouldOpenViewDialogElisa: true\n              });\n            } else if (item.typeMethod == 2) {\n              this.setState({\n                shouldOpenViewDialogFastTest: true\n              });\n            } else if (item.typeMethod == 3) {\n              this.setState({\n                shouldOpenViewDialogSerodia: true\n              });\n            } else if (item.typeMethod == 4) {\n              this.setState({\n                shouldOpenViewDialogEclia: true\n              });\n            }\n          });\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this8 = this;\n\n      var _this$props4 = this.props,\n          open = _this$props4.open,\n          handleClose = _this$props4.handleClose,\n          handleOKEditClose = _this$props4.handleOKEditClose,\n          isView = _this$props4.isView,\n          t = _this$props4.t,\n          i18n = _this$props4.i18n;\n      var _this$state5 = this.state,\n          id = _this$state5.id,\n          isViewButton = _this$state5.isViewButton,\n          healthOrgRound = _this$state5.healthOrgRound,\n          reagentLot = _this$state5.reagentLot,\n          reagent = _this$state5.reagent,\n          technician = _this$state5.technician,\n          reagentExpiryDate = _this$state5.reagentExpiryDate,\n          orderTest = _this$state5.orderTest,\n          view = _this$state5.view,\n          item = _this$state5.item,\n          personBuyReagent = _this$state5.personBuyReagent,\n          reagentUnBoxDate = _this$state5.reagentUnBoxDate,\n          details = _this$state5.details,\n          hasErrorResult = _this$state5.hasErrorResult,\n          testDate = _this$state5.testDate,\n          note = _this$state5.note,\n          shouldOpenHealthOrgRoundPopup = _this$state5.shouldOpenHealthOrgRoundPopup,\n          isFinalResult = _this$state5.isFinalResult,\n          listSample = _this$state5.listSample,\n          listResult = _this$state5.listResult,\n          loading = _this$state5.loading;\n      var searchObject = {\n        pageIndex: 0,\n        pageSize: 1000000\n      };\n      var technicianSearchObject = {\n        pageIndex: 0,\n        pageSize: 1000000,\n        searchByHealthOrg: true,\n        healthOrg: healthOrgRound && healthOrgRound.healthOrg && healthOrgRound.healthOrg.id ? {\n          id: healthOrgRound.healthOrg.id\n        } : null\n      };\n      return /*#__PURE__*/React.createElement(Dialog, {\n        open: open,\n        PaperComponent: PaperComponent,\n        maxWidth: 'lg',\n        fullWidth: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 547,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: clsx(\"wrapperButton\", !loading && 'hidden'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 548,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(CircularProgress, {\n        className: \"buttonProgress\",\n        size: 24,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 549,\n          columnNumber: 11\n        }\n      })), /*#__PURE__*/React.createElement(ValidatorForm, {\n        ref: \"form\",\n        onSubmit: this.handleFormSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 551,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(DialogTitle, {\n        style: {\n          cursor: 'move'\n        },\n        id: \"draggable-dialog-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"mb-20 styleColor\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 553,\n          columnNumber: 13\n        }\n      }, !isView ? t(\"SaveUpdate\") : t(\"Details\")), /*#__PURE__*/React.createElement(IconButton, {\n        style: {\n          position: \"absolute\",\n          right: \"10px\",\n          top: \"10px\"\n        },\n        onClick: function onClick() {\n          return handleClose();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 554,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        color: \"error\",\n        title: t(\"close\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 554,\n          columnNumber: 116\n        }\n      }, \"close\"))), /*#__PURE__*/React.createElement(DialogContent, {\n        dividers: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 560,\n          columnNumber: 11\n        }\n      }, this.state.shouldOpenConfirmationDialog && /*#__PURE__*/React.createElement(ConfirmationDialog, {\n        title: t(\"confirm\"),\n        open: this.state.shouldOpenConfirmationDialog,\n        onConfirmDialogClose: this.handleDialogFinalResultClose,\n        onYesClick: this.handleFinalResult,\n        text: isFinalResult ? t(\"EqaResult.unFinalResultConfirm\") : t(\"EqaResult.FinalResultConfirm\"),\n        Yes: t(\"general.Yes\"),\n        No: t(\"general.No\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 562,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(Grid, {\n        className: \"\",\n        container: true,\n        spacing: 2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 572,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        md: 8,\n        sm: 8,\n        xs: 8,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(TextValidator, {\n        size: \"small\",\n        variant: \"outlined\",\n        disabled: isView,\n        label: /*#__PURE__*/React.createElement(\"span\", {\n          className: \"font\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 578,\n            columnNumber: 26\n          }\n        }, t(\"EQAResultReportElisa.healthOrgName\")),\n        placeholder: t(\"EQAResultReportElisa.healthOrgName\"),\n        id: \"healthOrgRound\",\n        className: \"w-100 stylePlaceholder\",\n        value: healthOrgRound != null && healthOrgRound.healthOrg ? healthOrgRound.healthOrg.name : '',\n        validators: [\"required\"],\n        errorMessages: [t(\"general.errorMessages_required\")],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 574,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        md: 4,\n        sm: 4,\n        xs: 4,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 587,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(FormControlLabel, {\n        label: /*#__PURE__*/React.createElement(\"span\", {\n          className: \"font\",\n          style: {\n            fontWeight: \"bold\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 589,\n            columnNumber: 26\n          }\n        }, \" \", t('EQAResultReportFastTest.isFinalResult')),\n        control: /*#__PURE__*/React.createElement(Checkbox, {\n          checked: isFinalResult,\n          onClick: function onClick(isFinalResult) {\n            return _this8.notificationFinalResult(isFinalResult);\n          } // this.handleFinalResult(isFinalResult, 'isFinalResult')\n          ,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 590,\n            columnNumber: 28\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 588,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        className: \"mt-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 611,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 612,\n          columnNumber: 17\n        }\n      }, listSample && /*#__PURE__*/React.createElement(Paper, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 613,\n          columnNumber: 35\n        }\n      }, /*#__PURE__*/React.createElement(TableContainer, {\n        style: {\n          maxHeight: 1000\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 614,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Table, {\n        stickyHeader: true,\n        \"aria-label\": \"sticky table\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 615,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(TableHead, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 616,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(TableRow, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 617,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(TableCell, {\n        width: \"50px\",\n        align: \"center\",\n        className: \"p-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 618,\n          columnNumber: 29\n        }\n      }, t('ResultsOfTheUnits.STT')), /*#__PURE__*/React.createElement(TableCell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 619,\n          columnNumber: 29\n        }\n      }, t('ResultsOfTheUnits.set')), listResult && this.renderRowHead(), view && /*#__PURE__*/React.createElement(TableCell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 624,\n          columnNumber: 39\n        }\n      }, t('EQAResultReportConclusion.final_conclusion')))), /*#__PURE__*/React.createElement(TableBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 627,\n          columnNumber: 25\n        }\n      }, listSample && listSample.map(function (sample, index) {\n        return _this8.renderResultDetails(sample, index);\n      })))))), this.state.shouldOpenViewDialogElisa && /*#__PURE__*/React.createElement(EQAResultReportElisaDialog, {\n        t: t,\n        i18n: i18n,\n        handleClose: this.handleDialogClose,\n        open: this.state.shouldOpenViewDialogElisa,\n        handleOKEditClose: this.handleOKEditClose,\n        item: item,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 637,\n          columnNumber: 19\n        }\n      }), this.state.shouldOpenViewDialogFastTest && /*#__PURE__*/React.createElement(EQAResultReportFastTestEditorDialog, {\n        t: t,\n        i18n: i18n,\n        handleClose: this.handleDialogClose,\n        open: this.state.shouldOpenViewDialogFastTest,\n        handleOKEditClose: this.handleOKEditClose,\n        item: item,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 645,\n          columnNumber: 19\n        }\n      }), this.state.shouldOpenViewDialogSerodia && /*#__PURE__*/React.createElement(EQAResultReportSerodiaDialog, {\n        t: t,\n        i18n: i18n,\n        handleClose: this.handleDialogClose,\n        open: this.state.shouldOpenViewDialogSerodia,\n        handleOKEditClose: this.handleOKEditClose,\n        item: item,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 653,\n          columnNumber: 19\n        }\n      }), this.state.shouldOpenViewDialogEclia && /*#__PURE__*/React.createElement(EQAResultReportEcliaEditorDialog, {\n        t: t,\n        i18n: i18n,\n        handleClose: this.handleDialogClose,\n        open: this.state.shouldOpenViewDialogEclia,\n        handleOKEditClose: this.handleOKEditClose,\n        item: item,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 661,\n          columnNumber: 19\n        }\n      })))), /*#__PURE__*/React.createElement(DialogActions, {\n        spacing: 4,\n        className: \"flex flex-end flex-middle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 671,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"contained\",\n        color: \"secondary\",\n        type: \"button\",\n        onClick: function onClick() {\n          return handleClose();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 672,\n          columnNumber: 13\n        }\n      }, \" \", t('Cancel')), !isViewButton && /*#__PURE__*/React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 673,\n          columnNumber: 32\n        }\n      }, t('Save')))));\n    }\n  }]);\n\n  return EQAResultReportConclusionDialog;\n}(Component);\n\nexport default EQAResultReportConclusionDialog;","map":{"version":3,"sources":["E:/DoAnTotNghiep/code/Client-V2/src/app/views/EQAResultReportConclusion/EQAResultReportConclusionDialog.jsx"],"names":["React","Component","Dialog","Button","Grid","Select","InputAdornment","FormControl","MenuItem","DialogTitle","DialogContent","DialogActions","FormHelperText","FormControlLabel","Checkbox","TableBody","TableCell","TableContainer","Table","TableRow","TableHead","Icon","IconButton","shortid","PropTypes","ConstantList","Breadcrumb","ConfirmationDialog","MaterialTable","MTableToolbar","Chip","MTableBody","MTableHeader","ValidatorForm","TextValidator","TextField","updateResultReportConclusionBySampleTube","Draggable","Paper","MuiPickersUtilsProvider","DateTimePicker","DateFnsUtils","AsynchronousAutocomplete","searchByPage","reagentSearchByPage","getAllEQARound","getListHealthOrgEQARoundByEQARoundIdAndUser","EQAResultReportElisaDialog","EQAResultReportFastTestEditorDialog","EQAResultReportSerodiaDialog","EQAResultReportEcliaEditorDialog","getAllResultByHealthOrgEQARoundId","getResultReportById","getItemById","toast","clsx","CircularProgress","configure","autoClose","draggable","limit","PaperComponent","props","EQAResultReportConclusionDialog","state","isViewButton","hasErrorHealthOrgRound","hasErrorEQARound","isUsingIQC","isUsingControlLine","eqaRound","healthOrgRound","reagentLot","order","reagent","technician","personBuyReagent","details","supplyOfReagent","timeToResult","reagentExpiryDate","testDate","Date","reagentUnBoxDate","shouldOpenSearchDialog","shouldOpenConfirmationDialog","shouldOpenSearchEQASampleSearchDialog","shouldOpenViewDialogElisa","shouldOpenViewDialogFastTest","shouldOpenViewDialogSerodia","shouldOpenViewDialogEclia","isFinalResult","view","sampleTubeResultConclusionList","loading","handleDateChange","date","name","setState","handleChange","event","source","persist","isActive","target","checked","value","handleHealthOrgRoundChange","handleDialogClose","handleHealthOrgRoundPopupClose","shouldOpenHealthOrgRoundPopup","checkResult","list","isCheck","length","forEach","item","typeMethod","handleRowDataCellChange","index","p","result","splice","openCircularProgress","handleFormSubmit","t","currentHealthOrgEQARound","warn","id","then","res","success","catch","err","error","notificationFinalResult","handleFinalResult","dateSubmitResults","handleDialogFinalResultClose","open","handleClose","currentHealthOrg","data","el","listResult","sampleSet","listSample","sort","a","b","orderNumber","sampleTube","code","sampleSetDetail","eQASet","hor","tubeID","sample","tubeCode","push","hasErrorResult","onSelectEvent","handleDelete","handleClick","titleCell","generate","getTypeMethodName","map","renderColHeadFirst","title","renderHeadCells","text","type","renderSample","sttCell","resultTableAll","textAlign","resultTable","cellContentByMethod","content","resultDetail","eqaSample","cell","renderCells","i18n","contentCell","openDialogDetailCellContent","resultReportDetail","resultReport","isView","handleOKEditClose","orderTest","note","searchObject","pageIndex","pageSize","technicianSearchObject","searchByHealthOrg","healthOrg","cursor","position","right","top","fontWeight","maxHeight","renderRowHead","renderResultDetails"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n  Dialog,\r\n  Button,\r\n  Grid,\r\n  Select,\r\n  InputAdornment,\r\n  FormControl,\r\n  MenuItem,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  FormHelperText,\r\n  FormControlLabel,\r\n  Checkbox, TableBody, TableCell,\r\n  TableContainer, Table, TableRow,\r\n  TableHead, Icon, IconButton\r\n} from \"@material-ui/core\";\r\nimport shortid from \"shortid\";\r\nimport PropTypes from \"prop-types\";\r\nimport ConstantList from \"../../appConfig\";\r\nimport { Breadcrumb, ConfirmationDialog } from \"egret\";\r\nimport MaterialTable, { MTableToolbar, Chip, MTableBody, MTableHeader } from 'material-table';\r\nimport { ValidatorForm, TextValidator, TextField } from \"react-material-ui-form-validator\";\r\nimport { updateResultReportConclusionBySampleTube } from \"./EQAResultReportConclusionServices\";\r\nimport Draggable from 'react-draggable';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { MuiPickersUtilsProvider, DateTimePicker } from \"@material-ui/pickers\";\r\nimport DateFnsUtils from \"@date-io/date-fns\";\r\nimport AsynchronousAutocomplete from \"../utilities/AsynchronousAutocomplete\";\r\nimport { searchByPage as reagentSearchByPage } from \"../Reagent/ReagentService\";\r\nimport { searchByPage as getAllEQARound } from \"../EQARound/EQARoundService\";\r\nimport { getListHealthOrgEQARoundByEQARoundIdAndUser } from \"./EQAResultReportConclusionServices\";\r\nimport EQAResultReportElisaDialog from \"../EQAResultReportElisa/EQAResultReportElisaDialog\";\r\nimport EQAResultReportFastTestEditorDialog from \"../EQAResultReportFastTest/EQAResultReportFastTestEditorDialog\";\r\nimport EQAResultReportSerodiaDialog from \"../EQAResultReportSerodia/EQAResultReportSerodiaDialog\";\r\nimport EQAResultReportEcliaEditorDialog from \"../EQAResultReportEclia/EQAResultReportEcliaEditorDialog\";\r\nimport { getAllResultByHealthOrgEQARoundId, getResultReportById, getItemById } from \"../ResultsOfTheUnits/ResultsOfTheUnitsService\";\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport '../../../styles/views/_loadding.scss';\r\nimport '../../../styles/views/_style.scss';\r\nimport clsx from 'clsx';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\ntoast.configure({\r\n  autoClose: 3000,\r\n  draggable: false,\r\n  limit: 3\r\n});\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable handle=\"#draggable-dialog-title\" cancel={'[class*=\"MuiDialogContent-root\"]'}>\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\nclass EQAResultReportConclusionDialog extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  state = {\r\n    isViewButton: false,\r\n    hasErrorHealthOrgRound: false,\r\n    hasErrorEQARound: false,\r\n    isUsingIQC: false,\r\n    isUsingControlLine: false,\r\n    eqaRound: '',\r\n    healthOrgRound: '',\r\n    reagentLot: '',\r\n    order: '',\r\n    reagent: null,\r\n    technician: null,\r\n    personBuyReagent: '',\r\n    details: [],\r\n    supplyOfReagent: '',\r\n    timeToResult: '',\r\n    reagentExpiryDate: null,\r\n    testDate: new Date(),\r\n    reagentUnBoxDate: null,\r\n    shouldOpenSearchDialog: false,\r\n    shouldOpenConfirmationDialog: false,\r\n    shouldOpenSearchEQASampleSearchDialog: false,\r\n    shouldOpenViewDialogElisa: false,\r\n    shouldOpenViewDialogFastTest: false,\r\n    shouldOpenViewDialogSerodia: false,\r\n    shouldOpenViewDialogEclia: false,\r\n    isFinalResult: false,\r\n    view: false,\r\n    sampleTubeResultConclusionList: [],\r\n    loading: false\r\n  };\r\n\r\n  handleDateChange = (date, name) => {\r\n    this.setState({\r\n      [name]: date\r\n    });\r\n  };\r\n\r\n  handleChange = (event, source) => {\r\n    event.persist();\r\n    if (source === \"switch\") {\r\n      this.setState({ isActive: event.target.checked });\r\n      return;\r\n    }\r\n    if (source === \"isFinalResult\") {\r\n      this.setState({ isFinalResult: event.target.checked })\r\n    }\r\n    this.setState({\r\n      [event.target.name]: event.target.value\r\n    });\r\n  };\r\n\r\n  handleHealthOrgRoundChange = (event, source) => {\r\n    event.persist();\r\n    if (source === \"switch\") {\r\n      this.setState({ isActive: event.target.checked });\r\n      return;\r\n    }\r\n  };\r\n\r\n  handleDialogClose = () => {\r\n    this.setState({\r\n      shouldOpenViewDialogElisa: false,\r\n      shouldOpenViewDialogFastTest: false,\r\n      shouldOpenViewDialogSerodia: false,\r\n      shouldOpenViewDialogEclia: false,\r\n      shouldOpenConfirmationDialog: false,\r\n    });\r\n  };\r\n\r\n  componentWillMount() {\r\n    let { open, handleClose, item, sampleTubeResultConclusionList, currentHealthOrgEQARound, currentHealthOrg } = this.props;\r\n    if (sampleTubeResultConclusionList != null && currentHealthOrgEQARound != null) {\r\n      this.setState({\r\n        sampleTubeResultConclusionList, currentHealthOrgEQARound, currentHealthOrg\r\n      }, function () {\r\n        let { currentHealthOrgEQARound } = this.state\r\n        if (currentHealthOrgEQARound && currentHealthOrgEQARound.id) {\r\n          getItemById(currentHealthOrgEQARound.id).then((data) => {\r\n            this.setState({ healthOrgRound: data.data }, function () {\r\n              let { healthOrgRound, details } = this.state;\r\n              details = [];\r\n              getAllResultByHealthOrgEQARoundId(healthOrgRound.id).then((result) => {\r\n                if (result != null && result.data != null) {\r\n                  this.checkResult(result.data);\r\n                  if (result.data != null) {\r\n                    result.data.forEach(el => {\r\n                      if (el.typeMethod === 5) {\r\n                        this.setState({ isFinalResult: el.isFinalResult })\r\n                      }\r\n                    })\r\n                  }\r\n                  this.setState({\r\n                    listResult: result.data\r\n                  }, function () {\r\n                    let { sampleSet, listSample } = healthOrgRound;\r\n                    listSample = [];\r\n                    if (sampleSet != null && sampleSet.details != null && sampleSet.details.length > 0) {\r\n                      sampleSet.details.sort((a, b) => (a.orderNumber > b.orderNumber) ? 1 : (a.orderNumber === b.orderNumber) ? ((a.sampleTube.code > b.sampleTube.code) ? 1 : -1) : -1);\r\n                      sampleSet.details.forEach(sampleSetDetail => {\r\n                        let eQASet = {};\r\n                        let hor = {}\r\n                        hor.tubeID = sampleSetDetail.sample.id;\r\n                        hor.tubeCode = sampleSetDetail.code\r\n                        eQASet.id = sampleSetDetail.sample.id;\r\n                        eQASet.code = sampleSetDetail.code;\r\n                        listSample.push(eQASet);\r\n                      });\r\n                      this.setState({\r\n                        listSample: listSample\r\n                      });\r\n                    }\r\n                  });\r\n                }\r\n              });\r\n            });\r\n          });\r\n\r\n        }\r\n      })\r\n    }\r\n    if (item && item.details && item.details.length > 0) {\r\n      item.details.sort((a, b) => (a.orderNumber > b.orderNumber) ? 1 : (a.orderNumber === b.orderNumber) ? ((a.sampleTube.code > b.sampleTube.code) ? 1 : -1) : -1);\r\n    }\r\n    this.setState({\r\n      ...item, hasErrorResult: false\r\n    }, function () {\r\n    });\r\n  }\r\n\r\n  handleHealthOrgRoundPopupClose = () => {\r\n    this.setState({ shouldOpenHealthOrgRoundPopup: false }, function () {\r\n    });\r\n  }\r\n  checkResult = (list) => {\r\n    let isCheck = true;\r\n    if (list != null && list.length > 0) {\r\n      list.forEach(item => {\r\n        if (item.typeMethod != null && item.typeMethod == 5) {\r\n          isCheck = false;\r\n        }\r\n      });\r\n    }\r\n    if (isCheck) {\r\n      this.setState({ view: true });\r\n    }\r\n  }\r\n  handleRowDataCellChange = (event, index) => {\r\n    let { sampleTubeResultConclusionList } = this.state\r\n    let p = sampleTubeResultConclusionList[index]\r\n    // console.log(index)\r\n    // console.log(p)\r\n    p.result = event.target.value\r\n    // console.log(p)\r\n    sampleTubeResultConclusionList.splice(index, 1, p)\r\n    this.setState({ sampleTubeResultConclusionList }, () => {\r\n      // console.log(this.state.sampleTubeResultConclusionList)\r\n    })\r\n  }\r\n  renderRowHead() {\r\n    let isCheck = false;\r\n    let { onSelectEvent, handleDelete, handleClick } = this.props;\r\n    let { listResult, view } = this.state;\r\n    let titleCell = null;\r\n    if (listResult != null && listResult.length > 0) {\r\n      listResult.forEach(item => {\r\n        if (!titleCell) {\r\n          titleCell = <TableCell key={shortid.generate()} className=\"px-0\" align=\"left\">\r\n            {this.getTypeMethodName(item.typeMethod)}\r\n          </TableCell>\r\n        } else {\r\n          titleCell += <TableCell key={shortid.generate()} className=\"px-0\" align=\"left\">\r\n            {this.getTypeMethodName(item.typeMethod)}\r\n          </TableCell>\r\n        }\r\n      });\r\n    }\r\n\r\n\r\n    return (\r\n      <React.Fragment>\r\n        {listResult.map((item, index) => this.renderColHeadFirst(item))}\r\n      </React.Fragment>\r\n    )\r\n  }\r\n  renderColHeadFirst(item) {\r\n\r\n    if (item.reagent != null) {\r\n      item.title = this.getTypeMethodName(item.reagent.name, item.typeMethod);\r\n    }\r\n    else if (item.typeMethod == 5) {\r\n      item.title = this.getTypeMethodName(\"\", item.typeMethod);\r\n    }\r\n    return (\r\n      this.renderHeadCells(item)\r\n    )\r\n  }\r\n  renderHeadCells(item) {\r\n    if (item == null) {\r\n      item = {};\r\n    }\r\n    let titleCell = <TableCell key={shortid.generate()} className=\"px-0\" align=\"left\">\r\n      {item.title}\r\n    </TableCell>\r\n    return (\r\n      <React.Fragment>\r\n        {titleCell}\r\n      </React.Fragment>\r\n    )\r\n  }\r\n  getTypeMethodName(text, type) {\r\n    let { t } = this.props;\r\n    if (type == 1) {\r\n      return text;\r\n    } else if (type == 2) {\r\n      return text;\r\n    } else if (type == 3) {\r\n      return text;\r\n    } else if (type == 4) {\r\n      return text;\r\n    } else if (type == 5) {\r\n      return t('EQAResultReportConclusion.final_conclusion');\r\n    }\r\n  }\r\n\r\n  renderResultDetails(sample, index) {\r\n    return (\r\n      <React.Fragment>\r\n        <TableRow>\r\n          {this.renderSample(sample, index)}\r\n        </TableRow>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n  renderSample(item, index) {\r\n    let { sampleTubeResultConclusionList } = this.state\r\n    let { t } = this.props\r\n    let sttCell = <TableCell className=\"px-0\" align=\"center\">\r\n      {index + 1}\r\n    </TableCell>\r\n    let titleCell = <TableCell className=\"px-0\" align=\"left\">\r\n      {item ? item.code : ''}\r\n    </TableCell>\r\n    let resultTableAll = <TableCell className=\"px-0\" align=\"center\">\r\n      <FormControl className=\"w-100\">\r\n        <Select\r\n          style={{ textAlign: \"left\" }}\r\n          value={sampleTubeResultConclusionList[index] ? sampleTubeResultConclusionList[index].result : null}\r\n          onChange={(result) => this.handleRowDataCellChange(result, index)}\r\n          inputProps={{\r\n            name: \"result\",\r\n            id: \"result-simple\"\r\n          }}\r\n        >\r\n          <MenuItem value={-2}>{t(\"EQAResultReportElisa.Result.none\")}</MenuItem>\r\n          <MenuItem value={-1}>{t(\"EQAResultReportElisa.Result.negative\")}</MenuItem>\r\n          <MenuItem value={0}>{t(\"EQAResultReportElisa.Result.indertermine\")}</MenuItem>\r\n          <MenuItem value={1}>{t(\"EQAResultReportElisa.Result.positive\")}</MenuItem>\r\n          <MenuItem value={2}>{t(\"EQAResultReportElisa.Result.confirms\")}</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n    </TableCell>\r\n    let resultTable = <TableCell className=\"px-0\" align=\"center\">\r\n      <FormControl className=\"w-100\">\r\n        <Select\r\n          style={{ textAlign: \"left\" }}\r\n          value={sampleTubeResultConclusionList[index] ? sampleTubeResultConclusionList[index].result : null}\r\n          onChange={(result) => this.handleRowDataCellChange(result, index)}\r\n          inputProps={{\r\n            name: \"result\",\r\n            id: \"result-simple\"\r\n          }}\r\n        >\r\n          <MenuItem value={-2}>{t(\"EQAResultReportElisa.Result.none\")}</MenuItem>\r\n          <MenuItem value={-1}>{t(\"EQAResultReportElisa.Result.negative\")}</MenuItem>\r\n          <MenuItem value={0}>{t(\"EQAResultReportElisa.Result.indertermine\")}</MenuItem>\r\n          <MenuItem value={1}>{t(\"EQAResultReportElisa.Result.positive\")}</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n    </TableCell>\r\n\r\n    let result = <TableCell className=\"px-0\" align=\"center\">\r\n      <FormControl className=\"w-100\">\r\n        <Select\r\n          style={{ textAlign: \"left\" }}\r\n          value={sampleTubeResultConclusionList[index] ? sampleTubeResultConclusionList[index].result : null}\r\n          onChange={(result) => this.handleRowDataCellChange(result, index)}\r\n          inputProps={{\r\n            name: \"result\",\r\n            id: \"result-simple\"\r\n          }}\r\n        >\r\n          <MenuItem value={-2}>{t(\"EQAResultReportElisa.Result.none\")}</MenuItem>\r\n          <MenuItem value={-1}>{t(\"EQAResultReportElisa.Result.negative\")}</MenuItem>\r\n          <MenuItem value={0}>{t(\"EQAResultReportElisa.Result.indertermine\")}</MenuItem>\r\n          <MenuItem value={2}>{t(\"EQAResultReportElisa.Result.confirms\")}</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n    </TableCell>\r\n\r\n    let { listResult, currentHealthOrg } = this.state;\r\n    let cellContentByMethod = [];\r\n    // let {sampleTubeResultConclusionList} = this.state\r\n    listResult.forEach(result => {\r\n      let content = null;\r\n      if (result != null && result.details != null && result.details.length > 0 && item) {\r\n        result.details.forEach(resultDetail => {\r\n          if (resultDetail.sampleTube != null && resultDetail.sampleTube.eqaSample != null\r\n            && item.id == resultDetail.sampleTube.eqaSample.id) {\r\n            if (result.typeMethod != 5) {\r\n              content = resultDetail;\r\n              cellContentByMethod.push(content);\r\n            }\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    return (\r\n      <React.Fragment>\r\n        {sttCell}\r\n        {titleCell}\r\n        {cellContentByMethod.map((cell, index) => this.renderCells(cell))}\r\n        {/* {ConstantList.CHECK_HEALTH_ORG ? (currentHealthOrg.positiveAffirmativeRight ? resultTable :result) : resultTableAll} */}\r\n        {resultTableAll}\r\n      </React.Fragment>\r\n    )\r\n  }\r\n  renderCells(item) {\r\n    let { t, i18n } = this.props;\r\n    if (item == null) {\r\n      item = {};\r\n    }\r\n    let contentCell = <TableCell key={shortid.generate()} className=\"px-0\" align=\"left\">\r\n      {\r\n        item.result == 1 ? (\r\n          <small className=\"border-radius-4 bg-primary text-white px-8 py-2 \">\r\n            <a href=\"#\" onClick={() => this.openDialogDetailCellContent(item)}>\r\n              {t('result.positive')}\r\n            </a>\r\n          </small>\r\n        ) : (\r\n            <small className=\"border-radius-4 bg-light-gray px-8 py-2 \">\r\n              <a href=\"#\" onClick={() => this.openDialogDetailCellContent(item)}>\r\n                {\r\n                  item.result == -2 ? (\r\n                    t('result.none')\r\n                  ) : (\r\n                      item.result == -1 ? (\r\n                        t('result.negative')\r\n                      ) : (\r\n                          item.result == 0 ? (\r\n                            t('result.indertermine')\r\n                          ) : (item.result == 2 ? (\r\n                            t('EQAResultReportElisa.Result.confirms')\r\n                          ) : (\r\n                              ''\r\n                            ))\r\n                        )\r\n                    )\r\n                }\r\n              </a>\r\n            </small>\r\n          )\r\n      }\r\n    </TableCell>\r\n    return (\r\n      <React.Fragment>\r\n        {contentCell}\r\n      </React.Fragment>\r\n    )\r\n  }\r\n  openDialogDetailCellContent(resultReportDetail) {\r\n    if (resultReportDetail != null && resultReportDetail.resultReport != null && resultReportDetail.resultReport.id != null) {\r\n      getResultReportById(resultReportDetail.resultReport.id).then((result) => {\r\n        let item = result.data;\r\n        item.isView = true;\r\n        this.setState({ item: item }, function () {\r\n          //Elisa(1),//Kết Quả Xét Nghiệm Bằng Kỹ Thuật Elisa\r\n          //FastTest(2),//Kết Quả Xét Nghiệm Bằng Kỹ Thuật Xét Nghiệm Nhanh\r\n          //SERODIA(3)//Kết Quả Xét Nghiệm Bằng Kỹ Thuật SERODIA\r\n          //ECLIA(4)//KẾT QUẢ ĐIỆN/HÓA PHÁT QUANG\r\n          if (item.typeMethod == 1) {\r\n            this.setState({ shouldOpenViewDialogElisa: true });\r\n          } else if (item.typeMethod == 2) {\r\n            this.setState({ shouldOpenViewDialogFastTest: true });\r\n          } else if (item.typeMethod == 3) {\r\n            this.setState({ shouldOpenViewDialogSerodia: true });\r\n          } else if (item.typeMethod == 4) {\r\n            this.setState({ shouldOpenViewDialogEclia: true });\r\n          }\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  openCircularProgress = () => {\r\n    this.setState({ loading: true });\r\n  };\r\n\r\n  // handleSubmit = async () => {\r\n  //   await this.openCircularProgress();\r\n  //   var time = setTimeout(() => {\r\n  //     this.handleFormSubmit()\r\n  //   }, 500);\r\n  // }\r\n\r\n\r\n  handleFormSubmit = async () => {\r\n    await this.openCircularProgress();\r\n    const { t } = this.props;\r\n    const {\r\n      sampleTubeResultConclusionList,\r\n      currentHealthOrgEQARound,\r\n      isFinalResult\r\n    } = this.state;\r\n    if (sampleTubeResultConclusionList.length === 0) {\r\n      toast.warn(t(\"EQAResultReportConclusion.no_data\"));\r\n    } else {\r\n      updateResultReportConclusionBySampleTube(\r\n        sampleTubeResultConclusionList,\r\n        currentHealthOrgEQARound.id,\r\n        isFinalResult\r\n      )\r\n        .then(res => {\r\n          // this.props.handleOKEditClose();\r\n          toast.success(t(\"EQAResultReportConclusion.update_result_success\"));\r\n          this.setState({ loading: false });\r\n        })\r\n        .catch(err => {\r\n          toast.error(t(\"EQAResultReportConclusion.update_result_error\"));\r\n          this.setState({ loading: false });\r\n        });\r\n    }\r\n\r\n  };\r\n\r\n  notificationFinalResult = () => {\r\n    this.setState({ shouldOpenConfirmationDialog: true })\r\n  }\r\n  handleFinalResult = () => {\r\n    if (this.state.isFinalResult == null || !this.state.isFinalResult) {\r\n      this.setState({ isFinalResult: true, dateSubmitResults: new Date() }, () => {\r\n      })\r\n      this.handleDialogClose()\r\n    }\r\n    if (this.state.isFinalResult) {\r\n      this.setState({ isFinalResult: false, dateSubmitResults: new Date() }, () => {\r\n      })\r\n      this.handleDialogClose()\r\n    }\r\n  }\r\n  handleDialogFinalResultClose = () => {\r\n    // this.setState({isFinalResult:false},()=>{\r\n    // })\r\n    this.handleDialogClose()\r\n  }\r\n  render() {\r\n    let { open, handleClose, handleOKEditClose, isView, t, i18n } = this.props;\r\n    let {\r\n      id,\r\n      isViewButton,\r\n      healthOrgRound,\r\n      reagentLot,\r\n      reagent,\r\n      technician,\r\n      reagentExpiryDate,\r\n      orderTest,\r\n      view,\r\n      item,\r\n      personBuyReagent,\r\n      reagentUnBoxDate,\r\n      details,\r\n      hasErrorResult,\r\n      testDate, note,\r\n      shouldOpenHealthOrgRoundPopup,\r\n      isFinalResult, listSample, listResult, loading\r\n    } = this.state;\r\n\r\n    let searchObject = { pageIndex: 0, pageSize: 1000000 };\r\n    let technicianSearchObject = { pageIndex: 0, pageSize: 1000000, searchByHealthOrg: true, healthOrg: (healthOrgRound && healthOrgRound.healthOrg && healthOrgRound.healthOrg.id) ? { id: healthOrgRound.healthOrg.id } : null };\r\n\r\n    return (\r\n      <Dialog open={open} PaperComponent={PaperComponent} maxWidth={'lg'} fullWidth={true} >\r\n        <div className={clsx(\"wrapperButton\", !loading && 'hidden')} >\r\n          <CircularProgress className=\"buttonProgress\" size={24} />\r\n        </div>\r\n        <ValidatorForm ref=\"form\" onSubmit={this.handleFormSubmit}>\r\n          <DialogTitle style={{ cursor: 'move' }} id=\"draggable-dialog-title\">\r\n            <span className=\"mb-20 styleColor\">{!isView ? t(\"SaveUpdate\") : t(\"Details\")}</span>\r\n            <IconButton style={{ position: \"absolute\", right: \"10px\", top: \"10px\" }} onClick={() => handleClose()}><Icon color=\"error\"\r\n              title={t(\"close\")}>\r\n              close\r\n            </Icon>\r\n            </IconButton>\r\n          </DialogTitle>\r\n          <DialogContent dividers>\r\n            {this.state.shouldOpenConfirmationDialog && (\r\n              <ConfirmationDialog\r\n                title={t(\"confirm\")}\r\n                open={this.state.shouldOpenConfirmationDialog}\r\n                onConfirmDialogClose={this.handleDialogFinalResultClose}\r\n                onYesClick={this.handleFinalResult}\r\n                text={isFinalResult ? t(\"EqaResult.unFinalResultConfirm\") : t(\"EqaResult.FinalResultConfirm\")}\r\n                Yes={t(\"general.Yes\")}\r\n                No={t(\"general.No\")}\r\n              />\r\n            )}\r\n            <Grid className=\"\" container spacing={2}>\r\n              <Grid item md={8} sm={8} xs={8}>\r\n                <TextValidator\r\n                  size=\"small\"\r\n                  variant=\"outlined\"\r\n                  disabled={isView}\r\n                  label={<span className=\"font\">{t(\"EQAResultReportElisa.healthOrgName\")}</span>}\r\n                  placeholder={t(\"EQAResultReportElisa.healthOrgName\")}\r\n                  id=\"healthOrgRound\"\r\n                  className=\"w-100 stylePlaceholder\"\r\n                  value={(healthOrgRound != null && healthOrgRound.healthOrg) ? healthOrgRound.healthOrg.name : ''}\r\n                  validators={[\"required\"]}\r\n                  errorMessages={[t(\"general.errorMessages_required\")]}\r\n                />\r\n              </Grid>\r\n              <Grid item md={4} sm={4} xs={4}>\r\n                <FormControlLabel\r\n                  label={<span className=\"font\" style={{ fontWeight: \"bold\" }}> {t('EQAResultReportFastTest.isFinalResult')}</span>}\r\n                  control={<Checkbox checked={isFinalResult}\r\n                    onClick={(isFinalResult) =>\r\n                      this.notificationFinalResult(isFinalResult)\r\n                      // this.handleFinalResult(isFinalResult, 'isFinalResult')\r\n                    }\r\n                  />}\r\n\r\n                />\r\n              </Grid>\r\n              {/* <Grid item md={8} sm={6} xs={12}>\r\n                <TextValidator\r\n                  className=\"w-100\"\r\n                  label={t(\"SampleManagement.serum-bottle.note\")}\r\n                  onChange={this.handleChange}\r\n                  type=\"text\"\r\n                  name=\"note\"\r\n                  value={note}\r\n                />\r\n              </Grid> */}\r\n\r\n\r\n              <Grid item xs={12} className=\"mt-10\">\r\n                <div>\r\n                  {listSample && (<Paper>\r\n                    <TableContainer style={{ maxHeight: 1000 }} >\r\n                      <Table stickyHeader aria-label=\"sticky table\">\r\n                        <TableHead>\r\n                          <TableRow>\r\n                            <TableCell width=\"50px\" align=\"center\" className=\"p-0\">{t('ResultsOfTheUnits.STT')}</TableCell>\r\n                            <TableCell>{t('ResultsOfTheUnits.set')}</TableCell>\r\n                            {\r\n                              (listResult && this.renderRowHead())\r\n\r\n                            }\r\n                            {(view && <TableCell>{t('EQAResultReportConclusion.final_conclusion')}</TableCell>)}\r\n                          </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                          {\r\n                            (listSample && listSample.map((sample, index) => this.renderResultDetails(sample, index)))\r\n                          }\r\n                        </TableBody>\r\n                      </Table>\r\n                    </TableContainer>\r\n                  </Paper>)}\r\n                </div>\r\n                {this.state.shouldOpenViewDialogElisa && (\r\n                  <EQAResultReportElisaDialog t={t} i18n={i18n}\r\n                    handleClose={this.handleDialogClose}\r\n                    open={this.state.shouldOpenViewDialogElisa}\r\n                    handleOKEditClose={this.handleOKEditClose}\r\n                    item={item}\r\n                  />\r\n                )}\r\n                {this.state.shouldOpenViewDialogFastTest && (\r\n                  <EQAResultReportFastTestEditorDialog t={t} i18n={i18n}\r\n                    handleClose={this.handleDialogClose}\r\n                    open={this.state.shouldOpenViewDialogFastTest}\r\n                    handleOKEditClose={this.handleOKEditClose}\r\n                    item={item}\r\n                  />\r\n                )}\r\n                {this.state.shouldOpenViewDialogSerodia && (\r\n                  <EQAResultReportSerodiaDialog t={t} i18n={i18n}\r\n                    handleClose={this.handleDialogClose}\r\n                    open={this.state.shouldOpenViewDialogSerodia}\r\n                    handleOKEditClose={this.handleOKEditClose}\r\n                    item={item}\r\n                  />\r\n                )}\r\n                {this.state.shouldOpenViewDialogEclia && (\r\n                  <EQAResultReportEcliaEditorDialog t={t} i18n={i18n}\r\n                    handleClose={this.handleDialogClose}\r\n                    open={this.state.shouldOpenViewDialogEclia}\r\n                    handleOKEditClose={this.handleOKEditClose}\r\n                    item={item}\r\n                  />\r\n                )}\r\n              </Grid>\r\n            </Grid>\r\n          </DialogContent>\r\n          <DialogActions spacing={4} className=\"flex flex-end flex-middle\">\r\n            <Button variant=\"contained\" color=\"secondary\" type=\"button\" onClick={() => handleClose()}> {t('Cancel')}</Button>\r\n            {(!isViewButton && <Button variant=\"contained\" color=\"primary\" type=\"submit\" >\r\n              {t('Save')}\r\n            </Button>\r\n            )}\r\n          </DialogActions>\r\n        </ValidatorForm>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EQAResultReportConclusionDialog;\r\n"]},"metadata":{},"sourceType":"module"}