{"ast":null,"code":"import _objectSpread from \"E:\\\\DoAnTotNghiep\\\\code\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"E:\\\\DoAnTotNghiep\\\\code\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _createForOfIteratorHelper from \"E:\\\\DoAnTotNghiep\\\\code\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";\nimport _classCallCheck from \"E:\\\\DoAnTotNghiep\\\\code\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\DoAnTotNghiep\\\\code\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"E:\\\\DoAnTotNghiep\\\\code\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"E:\\\\DoAnTotNghiep\\\\code\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"E:\\\\DoAnTotNghiep\\\\code\\\\Client-V2\\\\src\\\\app\\\\views\\\\EQAHealthOrg\\\\ImportExcelDialog.jsx\";\nimport { Fab, Icon, Card, Grid, Divider, Button, DialogActions, Dialog } from \"@material-ui/core\";\nimport { createMuiTheme } from \"@material-ui/core/styles\";\nimport React, { Component } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport MaterialTable, { MTableToolbar, Chip, MTableBody, MTableHeader } from 'material-table';\nimport { useTranslation, withTranslation, Trans } from 'react-i18next';\nimport DateFnsUtils from \"@date-io/date-fns\";\nimport { ValidatorForm, TextValidator } from \"react-material-ui-form-validator\";\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Input from \"@material-ui/core/Input\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Select from \"@material-ui/core/Select\";\nimport Draggable from 'react-draggable';\nimport Paper from '@material-ui/core/Paper';\nimport { Breadcrumb, SimpleCard, EgretProgressBar } from \"egret\";\nimport axios from \"axios\";\nimport ConstantList from \"../../appConfig\";\nimport { toast } from \"react-toastify\";\n\nfunction PaperComponent(props) {\n  return /*#__PURE__*/React.createElement(Draggable, {\n    handle: \"#draggable-dialog-title\",\n    cancel: '[class*=\"MuiDialogContent-root\"]',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Paper, Object.assign({}, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 7\n    }\n  })));\n}\n\nvar ImportExcelDialog = /*#__PURE__*/function (_React$Component) {\n  _inherits(ImportExcelDialog, _React$Component);\n\n  var _super = _createSuper(ImportExcelDialog);\n\n  function ImportExcelDialog() {\n    var _this;\n\n    _classCallCheck(this, ImportExcelDialog);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      dragClass: \"\",\n      files: [],\n      statusList: [],\n      queProgress: 0\n    };\n\n    _this.handleFileUploadOnSelect = function (event) {\n      var t = _this.props.t;\n      var files = event.target.files;\n\n      _this.fileUpload(files[0]).then(function (res) {\n        toast(t('general.successFile'));\n      });\n    };\n\n    _this.handleFileSelect = function (event) {\n      var files = event.target.files;\n      var list = [];\n\n      var _iterator = _createForOfIteratorHelper(files),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var iterator = _step.value;\n          list.push({\n            file: iterator,\n            uploading: false,\n            error: false,\n            progress: 0\n          });\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      _this.setState({\n        files: [].concat(list)\n      });\n    };\n\n    _this.handleDragOver = function (event) {\n      event.preventDefault();\n\n      _this.setState({\n        dragClass: \"drag-shadow\"\n      });\n    };\n\n    _this.handleDrop = function (event) {\n      event.preventDefault();\n      event.persist();\n      var files = event.dataTransfer.files;\n      var list = [];\n\n      var _iterator2 = _createForOfIteratorHelper(files),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var iterator = _step2.value;\n          list.push({\n            file: iterator,\n            uploading: false,\n            error: false,\n            progress: 0\n          });\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      _this.setState({\n        dragClass: \"\",\n        files: [].concat(list)\n      });\n\n      return false;\n    };\n\n    _this.handleDragStart = function (event) {\n      _this.setState({\n        dragClass: \"drag-shadow\"\n      });\n    };\n\n    _this.handleSingleRemove = function (index) {\n      var files = _toConsumableArray(_this.state.files);\n\n      files.splice(index, 1);\n\n      _this.setState({\n        files: _toConsumableArray(files)\n      });\n    };\n\n    _this.handleAllRemove = function () {\n      _this.setState({\n        files: []\n      });\n    };\n\n    _this.uploadSingleFile = function (index) {\n      var t = _this.props.t;\n\n      var allFiles = _toConsumableArray(_this.state.files);\n\n      var file = _this.state.files[index];\n\n      _this.fileUpload(file.file).then(function (res) {\n        // alert(\"File uploaded successfully.\")\n        toast.success(t('general.successFile'));\n        window.location.reload();\n      }).catch(function (err) {\n        toast.error(t('error_message'));\n\n        _this.props.handleClose();\n      });\n\n      allFiles[index] = _objectSpread(_objectSpread({}, file), {}, {\n        uploading: true,\n        error: false\n      });\n\n      _this.setState({\n        files: _toConsumableArray(allFiles)\n      });\n    };\n\n    _this.uploadAllFile = function () {\n      var allFiles = [];\n\n      _this.state.files.map(function (item) {\n        allFiles.push(_objectSpread(_objectSpread({}, item), {}, {\n          uploading: true,\n          error: false\n        }));\n        return item;\n      });\n\n      _this.setState({\n        files: [].concat(allFiles),\n        queProgress: 35\n      });\n    };\n\n    _this.handleSingleCancel = function (index) {\n      var allFiles = _toConsumableArray(_this.state.files);\n\n      var file = _this.state.files[index];\n      allFiles[index] = _objectSpread(_objectSpread({}, file), {}, {\n        uploading: false,\n        error: true\n      });\n\n      _this.setState({\n        files: _toConsumableArray(allFiles)\n      });\n    };\n\n    _this.handleCancelAll = function () {\n      var allFiles = [];\n\n      _this.state.files.map(function (item) {\n        allFiles.push(_objectSpread(_objectSpread({}, item), {}, {\n          uploading: false,\n          error: true\n        }));\n        return item;\n      });\n\n      _this.setState({\n        files: [].concat(allFiles),\n        queProgress: 0\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(ImportExcelDialog, [{\n    key: \"fileUpload\",\n    value: function fileUpload(file) {\n      var url = ConstantList.API_ENPOINT + \"/api/file/importHealthOrg\";\n      var formData = new FormData();\n      formData.append('uploadfile', file); //Lưu ý tên 'uploadfile' phải trùng với tham số bên Server side\n\n      var config = {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      };\n      return axios.post(url, formData, config);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          t = _this$props.t,\n          i18n = _this$props.i18n,\n          handleClose = _this$props.handleClose,\n          handleSelect = _this$props.handleSelect,\n          selectedItem = _this$props.selectedItem,\n          open = _this$props.open;\n      var _this$state = this.state,\n          dragClass = _this$state.dragClass,\n          files = _this$state.files,\n          queProgress = _this$state.queProgress;\n      var isEmpty = files.length === 0;\n      return /*#__PURE__*/React.createElement(Dialog, {\n        onClose: handleClose,\n        open: open,\n        PaperComponent: PaperComponent,\n        maxWidth: 'md',\n        fullWidth: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(DialogTitle, {\n        style: {\n          cursor: 'move'\n        },\n        id: \"draggable-dialog-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"mb-20\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }\n      }, t(\"general.importExcel\"))), /*#__PURE__*/React.createElement(DialogContent, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"upload-form m-sm-30\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"flex flex-wrap mb-24\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"upload-single-file\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        size: \"small\",\n        className: \"capitalize\",\n        component: \"span\",\n        variant: \"contained\",\n        color: \"primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"flex flex-middle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        className: \"pr-8\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 21\n        }\n      }, \"cloud_upload\"), /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 21\n        }\n      }, t('general.select_file'))))), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"display-none\",\n        onChange: this.handleFileSelect,\n        id: \"upload-single-file\",\n        type: \"file\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"px-16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(Card, {\n        className: \"mb-24\",\n        elevation: 2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        spacing: 2,\n        justify: \"center\",\n        alignItems: \"center\",\n        direction: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        lg: 4,\n        md: 4,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 19\n        }\n      }, t('general.file_name')), /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        lg: 4,\n        md: 4,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 19\n        }\n      }, t('general.size')), /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        lg: 4,\n        md: 4,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 19\n        }\n      }, t('general.action')))), /*#__PURE__*/React.createElement(Divider, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 15\n        }\n      }), isEmpty && /*#__PURE__*/React.createElement(\"p\", {\n        className: \"px-16 center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 27\n        }\n      }, t('general.empty_file')), files.map(function (item, index) {\n        var file = item.file,\n            uploading = item.uploading,\n            error = item.error,\n            progress = item.progress;\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"px-16 py-16\",\n          key: file.name,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(Grid, {\n          container: true,\n          spacing: 2,\n          justify: \"center\",\n          alignItems: \"center\",\n          direction: \"row\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(Grid, {\n          item: true,\n          lg: 4,\n          md: 4,\n          sm: 12,\n          xs: 12,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 23\n          }\n        }, file.name), /*#__PURE__*/React.createElement(Grid, {\n          item: true,\n          lg: 1,\n          md: 1,\n          sm: 12,\n          xs: 12,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 23\n          }\n        }, (file.size / 1024 / 1024).toFixed(1), \" MB\"), /*#__PURE__*/React.createElement(Grid, {\n          item: true,\n          lg: 2,\n          md: 2,\n          sm: 12,\n          xs: 12,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(EgretProgressBar, {\n          value: progress,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 25\n          }\n        })), /*#__PURE__*/React.createElement(Grid, {\n          item: true,\n          lg: 1,\n          md: 1,\n          sm: 12,\n          xs: 12,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 23\n          }\n        }, error && /*#__PURE__*/React.createElement(Icon, {\n          color: \"error\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 35\n          }\n        }, \"error\")), /*#__PURE__*/React.createElement(Grid, {\n          item: true,\n          lg: 4,\n          md: 4,\n          sm: 12,\n          xs: 12,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"flex\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          disabled: uploading,\n          onClick: function onClick() {\n            return _this2.uploadSingleFile(index);\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 27\n          }\n        }, t('general.upload')), /*#__PURE__*/React.createElement(Button, {\n          className: \"mx-8\",\n          variant: \"contained\",\n          disabled: !uploading,\n          color: \"secondary\",\n          onClick: function onClick() {\n            return _this2.handleSingleCancel(index);\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 27\n          }\n        }, t('general.cancel')), /*#__PURE__*/React.createElement(Button, {\n          variant: \"contained\",\n          className: \"bg-error\",\n          onClick: function onClick() {\n            return _this2.handleSingleRemove(index);\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 27\n          }\n        }, t('general.remove'))))));\n      })))), /*#__PURE__*/React.createElement(DialogActions, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        className: \"mb-16 mr-36 align-bottom\",\n        variant: \"contained\",\n        color: \"secondary\",\n        onClick: function onClick() {\n          return handleClose();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 11\n        }\n      }, t('general.close'))));\n    }\n  }]);\n\n  return ImportExcelDialog;\n}(React.Component);\n\nexport default ImportExcelDialog;","map":{"version":3,"sources":["E:/DoAnTotNghiep/code/Client-V2/src/app/views/EQAHealthOrg/ImportExcelDialog.jsx"],"names":["Fab","Icon","Card","Grid","Divider","Button","DialogActions","Dialog","createMuiTheme","React","Component","ReactDOM","MaterialTable","MTableToolbar","Chip","MTableBody","MTableHeader","useTranslation","withTranslation","Trans","DateFnsUtils","ValidatorForm","TextValidator","DialogContent","DialogTitle","Input","InputLabel","MenuItem","FormControl","Select","Draggable","Paper","Breadcrumb","SimpleCard","EgretProgressBar","axios","ConstantList","toast","PaperComponent","props","ImportExcelDialog","state","dragClass","files","statusList","queProgress","handleFileUploadOnSelect","event","t","target","fileUpload","then","res","handleFileSelect","list","iterator","push","file","uploading","error","progress","setState","handleDragOver","preventDefault","handleDrop","persist","dataTransfer","handleDragStart","handleSingleRemove","index","splice","handleAllRemove","uploadSingleFile","allFiles","success","window","location","reload","catch","err","handleClose","uploadAllFile","map","item","handleSingleCancel","handleCancelAll","url","API_ENPOINT","formData","FormData","append","config","headers","post","i18n","handleSelect","selectedItem","open","isEmpty","length","cursor","name","size","toFixed"],"mappings":"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","sourcesContent":["import { Fab, Icon, Card, Grid, Divider, Button, DialogActions, Dialog } from \"@material-ui/core\";\r\nimport { createMuiTheme } from \"@material-ui/core/styles\";\r\nimport React, { Component } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport MaterialTable, { MTableToolbar, Chip, MTableBody, MTableHeader } from 'material-table';\r\nimport { useTranslation, withTranslation, Trans } from 'react-i18next';\r\nimport DateFnsUtils from \"@date-io/date-fns\";\r\nimport { ValidatorForm, TextValidator } from \"react-material-ui-form-validator\";\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Input from \"@material-ui/core/Input\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport Draggable from 'react-draggable';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { Breadcrumb, SimpleCard, EgretProgressBar } from \"egret\";\r\nimport axios from \"axios\";\r\nimport ConstantList from \"../../appConfig\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable handle=\"#draggable-dialog-title\" cancel={'[class*=\"MuiDialogContent-root\"]'}>\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\nclass ImportExcelDialog extends React.Component {\r\n  state = {\r\n    dragClass: \"\",\r\n    files: [],\r\n    statusList: [],\r\n    queProgress: 0\r\n  };\r\n  handleFileUploadOnSelect = event => {\r\n    let {t} = this.props;\r\n    let files = event.target.files;\r\n    this.fileUpload(files[0]).then(res => {\r\n      toast(t('general.successFile'))\r\n    });\r\n  }\r\n  handleFileSelect = event => {\r\n    let files = event.target.files;\r\n    let list = [];\r\n\r\n    for (const iterator of files) {\r\n      list.push({\r\n        file: iterator,\r\n        uploading: false,\r\n        error: false,\r\n        progress: 0\r\n      });\r\n    }\r\n\r\n    this.setState({\r\n      files: [...list]\r\n    });\r\n  };\r\n\r\n  handleDragOver = event => {\r\n    event.preventDefault();\r\n    this.setState({ dragClass: \"drag-shadow\" });\r\n  };\r\n\r\n  handleDrop = event => {\r\n    event.preventDefault();\r\n    event.persist();\r\n\r\n    let files = event.dataTransfer.files;\r\n    let list = [];\r\n\r\n    for (const iterator of files) {\r\n      list.push({\r\n        file: iterator,\r\n        uploading: false,\r\n        error: false,\r\n        progress: 0\r\n      });\r\n    }\r\n\r\n    this.setState({\r\n      dragClass: \"\",\r\n      files: [...list]\r\n    });\r\n\r\n    return false;\r\n  };\r\n\r\n  handleDragStart = event => {\r\n    this.setState({ dragClass: \"drag-shadow\" });\r\n  };\r\n\r\n  handleSingleRemove = index => {\r\n    let files = [...this.state.files];\r\n    files.splice(index, 1);\r\n    this.setState({\r\n      files: [...files]\r\n    });\r\n  };\r\n\r\n  handleAllRemove = () => {\r\n    this.setState({ files: [] });\r\n  };\r\n  fileUpload(file) {\r\n    const url = ConstantList.API_ENPOINT + \"/api/file/importHealthOrg\";\r\n    let formData = new FormData();\r\n    formData.append('uploadfile', file);//Lưu ý tên 'uploadfile' phải trùng với tham số bên Server side\r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    }\r\n    return axios.post(url, formData, config)\r\n  }\r\n\r\n  uploadSingleFile = index => {\r\n    let {t} = this.props;\r\n    let allFiles = [...this.state.files];\r\n    let file = this.state.files[index];\r\n    this.fileUpload(file.file).then(res => {\r\n      // alert(\"File uploaded successfully.\")\r\n      toast.success(t('general.successFile'));\r\n      window.location.reload();\r\n    }).catch(err => {\r\n      toast.error(t('error_message'));\r\n      this.props.handleClose();\r\n    })\r\n\r\n    allFiles[index] = { ...file, uploading: true, error: false };\r\n\r\n    this.setState({\r\n      files: [...allFiles]\r\n    });\r\n  };\r\n\r\n  uploadAllFile = () => {\r\n    let allFiles = [];\r\n\r\n    this.state.files.map(item => {\r\n      allFiles.push({\r\n        ...item,\r\n        uploading: true,\r\n        error: false\r\n      });\r\n\r\n      return item;\r\n    });\r\n\r\n    this.setState({\r\n      files: [...allFiles],\r\n      queProgress: 35\r\n    });\r\n  };\r\n\r\n  handleSingleCancel = index => {\r\n    let allFiles = [...this.state.files];\r\n    let file = this.state.files[index];\r\n\r\n    allFiles[index] = { ...file, uploading: false, error: true };\r\n\r\n    this.setState({\r\n      files: [...allFiles]\r\n    });\r\n  };\r\n\r\n  handleCancelAll = () => {\r\n    let allFiles = [];\r\n\r\n    this.state.files.map(item => {\r\n      allFiles.push({\r\n        ...item,\r\n        uploading: false,\r\n        error: true\r\n      });\r\n\r\n      return item;\r\n    });\r\n\r\n    this.setState({\r\n      files: [...allFiles],\r\n      queProgress: 0\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { t, i18n, handleClose, handleSelect, selectedItem, open } = this.props;\r\n    let { dragClass, files, queProgress } = this.state;\r\n    let isEmpty = files.length === 0;\r\n\r\n    return (\r\n      <Dialog onClose={handleClose} open={open} PaperComponent={PaperComponent} maxWidth={'md'} fullWidth>\r\n        <DialogTitle style={{ cursor: 'move' }} id=\"draggable-dialog-title\">\r\n          <span className=\"mb-20\">{t(\"general.importExcel\")}</span>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <div className=\"upload-form m-sm-30\">\r\n            <div className=\"flex flex-wrap mb-24\">\r\n              <label htmlFor=\"upload-single-file\">\r\n                <Button\r\n                  size=\"small\"\r\n                  className=\"capitalize\"\r\n                  component=\"span\"\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                >\r\n                  <div className=\"flex flex-middle\">\r\n                    <Icon className=\"pr-8\">cloud_upload</Icon>\r\n                    <span>{t('general.select_file')}</span>\r\n                  </div>\r\n                </Button>\r\n              </label>\r\n              <input\r\n                className=\"display-none\"\r\n                onChange={this.handleFileSelect}\r\n                id=\"upload-single-file\"\r\n                type=\"file\"\r\n              />\r\n              <div className=\"px-16\"></div>\r\n            </div>\r\n            <Card className=\"mb-24\" elevation={2}>\r\n              <div className=\"p-16\">\r\n                <Grid\r\n                  container\r\n                  spacing={2}\r\n                  justify=\"center\"\r\n                  alignItems=\"center\"\r\n                  direction=\"row\"\r\n                >\r\n                  <Grid item lg={4} md={4}>\r\n                  {t('general.file_name')}\r\n                </Grid>\r\n                  <Grid item lg={4} md={4}>\r\n                  {t('general.size')}\r\n                </Grid>\r\n                  <Grid item lg={4} md={4}>\r\n                  {t('general.action')}\r\n                </Grid>\r\n                </Grid>\r\n              </div>\r\n              <Divider></Divider>\r\n\r\n              {isEmpty && <p className=\"px-16 center\">{t('general.empty_file')}</p>}\r\n\r\n              {files.map((item, index) => {\r\n                let { file, uploading, error, progress } = item;\r\n                return (\r\n                  <div className=\"px-16 py-16\" key={file.name}>\r\n                    <Grid\r\n                      container\r\n                      spacing={2}\r\n                      justify=\"center\"\r\n                      alignItems=\"center\"\r\n                      direction=\"row\"\r\n                    >\r\n                      <Grid item lg={4} md={4} sm={12} xs={12}>\r\n                        {file.name}\r\n                      </Grid>\r\n                      <Grid item lg={1} md={1} sm={12} xs={12}>\r\n                        {(file.size / 1024 / 1024).toFixed(1)} MB\r\n                    </Grid>\r\n                      <Grid item lg={2} md={2} sm={12} xs={12}>\r\n                        <EgretProgressBar value={progress}></EgretProgressBar>\r\n                      </Grid>\r\n                      <Grid item lg={1} md={1} sm={12} xs={12}>\r\n                        {error && <Icon color=\"error\">error</Icon>}\r\n                        {/* {uploading && <Icon className=\"text-green\">done</Icon>} */}\r\n                      </Grid>\r\n                      <Grid item lg={4} md={4} sm={12} xs={12}>\r\n                        <div className=\"flex\">\r\n                          <Button\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            disabled={uploading}\r\n                            onClick={() => this.uploadSingleFile(index)}\r\n                          >\r\n                            {t('general.upload')}\r\n                          </Button>\r\n                          <Button\r\n                            className=\"mx-8\"\r\n                            variant=\"contained\"\r\n                            disabled={!uploading}\r\n                            color=\"secondary\"\r\n                            onClick={() => this.handleSingleCancel(index)}\r\n                          >\r\n                            {t('general.cancel')}\r\n                          </Button>\r\n                          <Button\r\n                            variant=\"contained\"\r\n                            className=\"bg-error\"\r\n                            onClick={() => this.handleSingleRemove(index)}\r\n                          >\r\n                            {t('general.remove')}\r\n                          </Button>\r\n                        </div>\r\n                      </Grid>\r\n                    </Grid>\r\n                  </div>\r\n                );\r\n              })}\r\n            </Card>\r\n          </div>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            className=\"mb-16 mr-36 align-bottom\"\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            onClick={() => handleClose()}>{t('general.close')}\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\nexport default ImportExcelDialog;"]},"metadata":{},"sourceType":"module"}